(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof module==="object"&&module.exports){module.exports=e(require("jquery"))}else{e(window.jQuery)}})(function(e){"use strict";var t=function(){var t=function(e){return function(t){return e===t}};var n=function(e,t){return e===t};var o=function(e){return function(t,n){return t[e]===n[e]}};var i=function(){return true};var r=function(){return false};var a=function(e){return function(){return!e.apply(e,arguments)}};var s=function(e,t){return function(n){return e(n)&&t(n)}};var l=function(e){return e};var c=function(e,t){return function(){return e[t].apply(e,arguments)}};var d=0;var u=function(e){var t=++d+"";return e?e+t:t};var f=function(t){var n=e(document);return{top:t.top+n.scrollTop(),left:t.left+n.scrollLeft(),width:t.right-t.left,height:t.bottom-t.top}};var h=function(e){var t={};for(var n in e){if(e.hasOwnProperty(n)){t[e[n]]=n}}return t};var v=function(e,t){t=t||"";return t+e.split(".").map(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}).join("")};return{eq:t,eq2:n,peq2:o,ok:i,fail:r,self:l,not:a,and:s,invoke:c,uniqueId:u,rect2bnd:f,invertObject:h,namespaceToCamel:v}}();var n=function(){var n=function(e){return e[0]};var o=function(e){return e[e.length-1]};var i=function(e){return e.slice(0,e.length-1)};var r=function(e){return e.slice(1)};var a=function(e,t){for(var n=0,o=e.length;n<o;n++){var i=e[n];if(t(i)){return i}}};var s=function(e,t){for(var n=0,o=e.length;n<o;n++){if(!t(e[n])){return false}}return true};var l=function(t,n){return e.inArray(n,t)};var c=function(e,t){return l(e,t)!==-1};var d=function(e,n){n=n||t.self;return e.reduce(function(e,t){return e+n(t)},0)};var u=function(e){var t=[],n=-1,o=e.length;while(++n<o){t[n]=e[n]}return t};var f=function(e){return!e||!e.length};var h=function(e,t){if(!e.length){return[]}var i=r(e);return i.reduce(function(e,n){var i=o(e);if(t(o(i),n)){i[i.length]=n}else{e[e.length]=[n]}return e},[[n(e)]])};var v=function(e){var t=[];for(var n=0,o=e.length;n<o;n++){if(e[n]){t.push(e[n])}}return t};var m=function(e){var t=[];for(var n=0,o=e.length;n<o;n++){if(!c(t,e[n])){t.push(e[n])}}return t};var p=function(e,t){var n=l(e,t);if(n===-1){return null}return e[n+1]};var g=function(e,t){var n=l(e,t);if(n===-1){return null}return e[n-1]};return{head:n,last:o,initial:i,tail:r,prev:g,next:p,find:a,contains:c,all:s,sum:d,from:u,isEmpty:f,clusterBy:h,compact:v,unique:m}}();var o=typeof define==="function"&&define.amd;var i=function(t){var n=t==="Comic Sans MS"?"Courier New":"Comic Sans MS";var o=e("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body);var i=o.css("fontFamily",n).width();var r=o.css("fontFamily",t+","+n).width();o.remove();return i!==r};var r=navigator.userAgent;var a=/MSIE|Trident/i.test(r);var s;if(a){var l=/MSIE (\d+[.]\d+)/.exec(r);if(l){s=parseFloat(l[1])}l=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(r);if(l){s=parseFloat(l[1])}}var c=/Edge\/\d+/.test(r);var d=!!window.CodeMirror;if(!d&&o&&require){if(require.hasOwnProperty("resolve")){try{require.resolve("codemirror");d=true}catch(e){d=false}}else if(require.hasOwnProperty("specified")){d=require.specified("codemirror")}}var u={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:a,isEdge:c,isFF:!c&&/firefox/i.test(r),isPhantom:/PhantomJS/i.test(r),isWebkit:!c&&/webkit/i.test(r),isChrome:!c&&/chrome/i.test(r),isSafari:!c&&/safari/i.test(r),browserVersion:s,jqueryVersion:parseFloat(e.fn.jquery),isSupportAmd:o,hasCodeMirror:d,isFontInstalled:i,isW3CRangeSupport:!!document.createRange};var f=String.fromCharCode(160);var h="\ufeff";var v=function(){var o=function(t){return t&&e(t).hasClass("note-editable")};var i=function(t){return t&&e(t).hasClass("note-control-sizing")};var r=function(e){e=e.toUpperCase();return function(t){return t&&t.nodeName.toUpperCase()===e}};var a=function(e){return e&&e.nodeType===3};var s=function(e){return e&&e.nodeType===1};var l=function(e){return e&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(e.nodeName.toUpperCase())};var c=function(e){if(o(e)){return false}return e&&/^DIV|^P|^LI|^H[1-7]/.test(e.nodeName.toUpperCase())};var d=function(e){return e&&/^H[1-7]/.test(e.nodeName.toUpperCase())};var m=r("PRE");var p=r("LI");var g=function(e){return c(e)&&!p(e)};var b=r("TABLE");var k=function(e){return!T(e)&&!y(e)&&!C(e)&&!c(e)&&!b(e)&&!N(e)};var y=function(e){return e&&/^UL|^OL/.test(e.nodeName.toUpperCase())};var C=r("HR");var w=function(e){return e&&/^TD|^TH/.test(e.nodeName.toUpperCase())};var N=r("BLOCKQUOTE");var T=function(e){return w(e)||N(e)||o(e)};var I=r("A");var E=function(e){return k(e)&&!!D(e,c)};var S=function(e){return k(e)&&!D(e,c)};var P=r("BODY");var H=function(e,t){return e.nextSibling===t||e.previousSibling===t};var R=function(e,n){n=n||t.ok;var o=[];if(e.previousSibling&&n(e.previousSibling)){o.push(e.previousSibling)}o.push(e);if(e.nextSibling&&n(e.nextSibling)){o.push(e.nextSibling)}return o};var x=u.isMSIE&&u.browserVersion<11?"&nbsp;":"<br>";var F=function(e){if(a(e)){return e.nodeValue.length}return e.childNodes.length};var L=function(e){var t=F(e);if(t===0){return true}else if(!a(e)&&t===1&&e.innerHTML===x){return true}else if(n.all(e.childNodes,a)&&e.innerHTML===""){return true}return false};var A=function(e){if(!l(e)&&!F(e)){e.innerHTML=x}};var D=function(e,t){while(e){if(t(e)){return e}if(o(e)){break}e=e.parentNode}return null};var M=function(e,t){e=e.parentNode;while(e){if(F(e)!==1){break}if(t(e)){return e}if(o(e)){break}e=e.parentNode}return null};var z=function(e,n){n=n||t.fail;var i=[];D(e,function(e){if(!o(e)){i.push(e)}return n(e)});return i};var B=function(e,t){var o=z(e);return n.last(o.filter(t))};var $=function(t,n){var o=z(t);for(var i=n;i;i=i.parentNode){if(e.inArray(i,o)>-1){return i}}return null};var U=function(e,n){n=n||t.fail;var o=[];while(e){if(n(e)){break}o.push(e);e=e.previousSibling}return o};var O=function(e,n){n=n||t.fail;var o=[];while(e){if(n(e)){break}o.push(e);e=e.nextSibling}return o};var j=function(e,n){var o=[];n=n||t.ok;(function t(i){if(e!==i&&n(i)){o.push(i)}for(var r=0,a=i.childNodes.length;r<a;r++){t(i.childNodes[r])}})(e);return o};var K=function(t,n){var o=t.parentNode;var i=e("<"+n+">")[0];o.insertBefore(i,t);i.appendChild(t);return i};var V=function(e,t){var n=t.nextSibling,o=t.parentNode;if(n){o.insertBefore(e,n)}else{o.appendChild(e)}return e};var W=function(t,n){e.each(n,function(e,n){t.appendChild(n)});return t};var q=function(e){return e.offset===0};var _=function(e){return e.offset===F(e.node)};var G=function(e){return q(e)||_(e)};var Y=function(e,t){while(e&&e!==t){if(X(e)!==0){return false}e=e.parentNode}return true};var Z=function(e,t){while(e&&e!==t){if(X(e)!==F(e.parentNode)-1){return false}e=e.parentNode}return true};var J=function(e,t){return q(e)&&Y(e.node,t)};var Q=function(e,t){return _(e)&&Z(e.node,t)};var X=function(e){var t=0;while(e=e.previousSibling){t+=1}return t};var ee=function(e){return!!(e&&e.childNodes&&e.childNodes.length)};var te=function(e,t){var n,i;if(e.offset===0){if(o(e.node)){return null}n=e.node.parentNode;i=X(e.node)}else if(ee(e.node)){n=e.node.childNodes[e.offset-1];i=F(n)}else{n=e.node;i=t?0:e.offset-1}return{node:n,offset:i}};var ne=function(e,t){var n,i;if(F(e.node)===e.offset){if(o(e.node)){return null}n=e.node.parentNode;i=X(e.node)+1}else if(ee(e.node)){n=e.node.childNodes[e.offset];i=0}else{n=e.node;i=t?F(e.node):e.offset+1}return{node:n,offset:i}};var oe=function(e,t){return e.node===t.node&&e.offset===t.offset};var ie=function(e){if(a(e.node)||!ee(e.node)||L(e.node)){return true}var t=e.node.childNodes[e.offset-1];var n=e.node.childNodes[e.offset];if((!t||l(t))&&(!n||l(n))){return true}return false};var re=function(e,t){while(e){if(t(e)){return e}e=te(e)}return null};var ae=function(e,t){while(e){if(t(e)){return e}e=ne(e)}return null};var se=function(e){if(!a(e.node)){return false}var t=e.node.nodeValue.charAt(e.offset-1);return t&&(t!==" "&&t!==f)};var le=function(e,t,n,o){var i=e;while(i){n(i);if(oe(i,t)){break}var r=o&&e.node!==i.node&&t.node!==i.node;i=ne(i,r)}};var ce=function(e,n){var o=z(n,t.eq(e));return o.map(X).reverse()};var de=function(e,t){var n=e;for(var o=0,i=t.length;o<i;o++){if(n.childNodes.length<=t[o]){n=n.childNodes[n.childNodes.length-1]}else{n=n.childNodes[t[o]]}}return n};var ue=function(e,t){var n=t&&t.isSkipPaddingBlankHTML;var o=t&&t.isNotSplitEdgePoint;if(G(e)&&(a(e.node)||o)){if(q(e)){return e.node}else if(_(e)){return e.node.nextSibling}}if(a(e.node)){return e.node.splitText(e.offset)}else{var i=e.node.childNodes[e.offset];var r=V(e.node.cloneNode(false),e.node);W(r,O(i));if(!n){A(e.node);A(r)}return r}};var fe=function(e,n,o){var i=z(n.node,t.eq(e));if(!i.length){return null}else if(i.length===1){return ue(n,o)}return i.reduce(function(e,t){if(e===n.node){e=ue(n,o)}return ue({node:t,offset:e?v.position(e):F(t)},o)})};var he=function(e,t){var o=t?c:T;var i=z(e.node,o);var r=n.last(i)||e.node;var a,s;if(o(r)){a=i[i.length-2];s=r}else{a=r;s=a.parentNode}var l=a&&fe(a,e,{isSkipPaddingBlankHTML:t,isNotSplitEdgePoint:t});if(!l&&s===e.node){l=e.node.childNodes[e.offset]}return{rightNode:l,container:s}};var ve=function(e){return document.createElement(e)};var me=function(e){return document.createTextNode(e)};var pe=function(e,t){if(!e||!e.parentNode){return}if(e.removeNode){return e.removeNode(t)}var n=e.parentNode;if(!t){var o=[];var i,r;for(i=0,r=e.childNodes.length;i<r;i++){o.push(e.childNodes[i])}for(i=0,r=o.length;i<r;i++){n.insertBefore(o[i],e)}}n.removeChild(e)};var ge=function(e,t){while(e){if(o(e)||!t(e)){break}var n=e.parentNode;pe(e);e=n}};var be=function(e,t){if(e.nodeName.toUpperCase()===t.toUpperCase()){return e}var o=ve(t);if(e.style.cssText){o.style.cssText=e.style.cssText}W(o,n.from(e.childNodes));V(o,e);pe(e);return o};var ke=r("TEXTAREA");var ye=function(e,t){var n=ke(e[0])?e.val():e.html();if(t){return n.replace(/[\n\r]/g,"")}return n};var Ce=function(t,n){var o=ye(t);if(n){var i=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;o=o.replace(i,function(e,t,n){n=n.toUpperCase();var o=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!t;var i=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return e+(o||i?"\n":"")});o=e.trim(o)}return o};var we=function(t){var n=e(t);var o=n.offset();var i=n.outerHeight(true);return{left:o.left,top:o.top+i}};var Ne=function(e,t){Object.keys(t).forEach(function(n){e.on(n,t[n])})};var Te=function(e,t){Object.keys(t).forEach(function(n){e.off(n,t[n])})};return{NBSP_CHAR:f,ZERO_WIDTH_NBSP_CHAR:h,blank:x,emptyPara:"<p>"+x+"</p>",makePredByNodeName:r,isEditable:o,isControlSizing:i,isText:a,isElement:s,isVoid:l,isPara:c,isPurePara:g,isHeading:d,isInline:k,isBlock:t.not(k),isBodyInline:S,isBody:P,isParaInline:E,isPre:m,isList:y,isTable:b,isCell:w,isBlockquote:N,isBodyContainer:T,isAnchor:I,isDiv:r("DIV"),isLi:p,isBR:r("BR"),isSpan:r("SPAN"),isB:r("B"),isU:r("U"),isS:r("S"),isI:r("I"),isImg:r("IMG"),isTextarea:ke,isEmpty:L,isEmptyAnchor:t.and(I,L),isClosestSibling:H,withClosestSiblings:R,nodeLength:F,isLeftEdgePoint:q,isRightEdgePoint:_,isEdgePoint:G,isLeftEdgeOf:Y,isRightEdgeOf:Z,isLeftEdgePointOf:J,isRightEdgePointOf:Q,prevPoint:te,nextPoint:ne,isSamePoint:oe,isVisiblePoint:ie,prevPointUntil:re,nextPointUntil:ae,isCharPoint:se,walkPoint:le,ancestor:D,singleChildAncestor:M,listAncestor:z,lastAncestor:B,listNext:O,listPrev:U,listDescendant:j,commonAncestor:$,wrap:K,insertAfter:V,appendChildNodes:W,position:X,hasChildren:ee,makeOffsetPath:ce,fromOffsetPath:de,splitTree:fe,splitPoint:he,create:ve,createText:me,remove:pe,removeWhile:ge,replace:be,html:Ce,value:ye,posFromPlaceholder:we,attachEvents:Ne,detachEvents:Te}}();var m=function(o,i){var r=this;var a=e.summernote.ui;this.memos={};this.modules={};this.layoutInfo={};this.options=i;this.initialize=function(){this.layoutInfo=a.createLayout(o,i);this._initialize();o.hide();return this};this.destroy=function(){this._destroy();o.removeData("summernote");a.removeLayout(o,this.layoutInfo)};this.reset=function(){var e=r.isDisabled();this.code(v.emptyPara);this._destroy();this._initialize();if(e){r.disable()}};this._initialize=function(){var t=e.extend({},this.options.buttons);Object.keys(t).forEach(function(e){r.memo("button."+e,t[e])});var n=e.extend({},this.options.modules,e.summernote.plugins||{});Object.keys(n).forEach(function(e){r.module(e,n[e],true)});Object.keys(this.modules).forEach(function(e){r.initializeModule(e)})};this._destroy=function(){Object.keys(this.modules).reverse().forEach(function(e){r.removeModule(e)});Object.keys(this.memos).forEach(function(e){r.removeMemo(e)})};this.code=function(e){var t=this.invoke("codeview.isActivated");if(e===undefined){this.invoke("codeview.sync");return t?this.layoutInfo.codable.val():this.layoutInfo.editable.html()}else{if(t){this.layoutInfo.codable.val(e)}else{this.layoutInfo.editable.html(e)}o.val(e);this.triggerEvent("change",e)}};this.isDisabled=function(){return this.layoutInfo.editable.attr("contenteditable")==="false"};this.enable=function(){this.layoutInfo.editable.attr("contenteditable",true);this.invoke("toolbar.activate",true)};this.disable=function(){if(this.invoke("codeview.isActivated")){this.invoke("codeview.deactivate")}this.layoutInfo.editable.attr("contenteditable",false);this.invoke("toolbar.deactivate",true)};this.triggerEvent=function(){var e=n.head(arguments);var i=n.tail(n.from(arguments));var r=this.options.callbacks[t.namespaceToCamel(e,"on")];if(r){r.apply(o[0],i)}o.trigger("summernote."+e,i)};this.initializeModule=function(e){var n=this.modules[e];n.shouldInitialize=n.shouldInitialize||t.ok;if(!n.shouldInitialize()){return}if(n.initialize){n.initialize()}if(n.events){v.attachEvents(o,n.events)}};this.module=function(e,t,n){if(arguments.length===1){return this.modules[e]}this.modules[e]=new t(this);if(!n){this.initializeModule(e)}};this.removeModule=function(e){var t=this.modules[e];if(t.shouldInitialize()){if(t.events){v.detachEvents(o,t.events)}if(t.destroy){t.destroy()}}delete this.modules[e]};this.memo=function(e,t){if(arguments.length===1){return this.memos[e]}this.memos[e]=t};this.removeMemo=function(e){if(this.memos[e]&&this.memos[e].destroy){this.memos[e].destroy()}delete this.memos[e]};this.createInvokeHandler=function(t,n){return function(o){o.preventDefault();r.invoke(t,n||e(o.target).closest("[data-value]").data("value"))}};this.invoke=function(){var e=n.head(arguments);var t=n.tail(n.from(arguments));var o=e.split(".");var i=o.length>1;var r=i&&n.head(o);var a=i?n.last(o):n.head(o);var s=this.modules[r||"editor"];if(!r&&this[a]){return this[a].apply(this,t)}else if(s&&s[a]&&s.shouldInitialize()){return s[a].apply(s,t)}};return this.initialize()};e.fn.extend({summernote:function(){var t=e.type(n.head(arguments));var o=t==="string";var i=t==="object";var r=i?n.head(arguments):{};r=e.extend({},e.summernote.options,r);r.langInfo=e.extend(true,{},e.summernote.lang["en-US"],e.summernote.lang[r.lang]);this.each(function(t,n){var o=e(n);if(!o.data("summernote")){var i=new m(o,r);o.data("summernote",i);o.data("summernote").triggerEvent("init",i.layoutInfo)}});var a=this.first();if(a.length){var s=a.data("summernote");if(o){return s.invoke.apply(s,n.from(arguments))}else if(r.focus){s.invoke("editor.focus")}}return this}});var p=function(t,n,o,i){this.render=function(r){var a=e(t);if(o&&o.contents){a.html(o.contents)}if(o&&o.className){a.addClass(o.className)}if(o&&o.data){e.each(o.data,function(e,t){a.attr("data-"+e,t)})}if(o&&o.click){a.on("click",o.click)}if(n){var s=a.find(".note-children-container");n.forEach(function(e){e.render(s.length?s:a)})}if(i){i(a,o)}if(o&&o.callback){o.callback(a)}if(r){r.append(a)}return a}};var g={create:function(t,n){return function(){var o=e.isArray(arguments[0])?arguments[0]:[];var i=typeof arguments[1]==="object"?arguments[1]:arguments[0];if(i&&i.children){o=i.children}return new p(t,o,i,n)}}};var b=g.create('<div class="note-editor note-frame panel panel-default"/>');var k=g.create('<div class="note-toolbar panel-heading"/>');var y=g.create('<div class="note-editing-area"/>');var C=g.create('<textarea class="note-codable"/>');var w=g.create('<div class="note-editable panel-body" contentEditable="true"/>');var N=g.create(['<div class="note-statusbar">','  <div class="note-resizebar">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join(""));var T=g.create('<div class="note-editor"/>');var I=g.create('<div class="note-editable" contentEditable="true"/>');var E=g.create('<div class="note-btn-group btn-group">');var S=g.create('<button type="button" class="note-btn btn btn-default btn-sm">',function(e,t){if(t&&t.tooltip){if(!t.customClass||t.customClass==""){t.customClass="note-btn btn btn-default btn-sm"}else{t.customClass="note-btn btn btn-sm "+t.customClass}if(t.buttonID){e.attr({id:t.buttonID})}e.attr({title:t.tooltip,class:"note-btn btn btn-sm "+t.customClass}).tooltip({container:"body",trigger:"hover",placement:"bottom"})}});var P=g.create('<div class="dropdown-menu">',function(t,n){var o=e.isArray(n.items)?n.items.map(function(e){var t=typeof e==="string"?e:e.value||"";var o=n.template?n.template(e):e;return'<li><a href="#" data-value="'+t+'">'+o+"</a></li>"}).join(""):n.items;t.html(o)});var H=g.create('<div class="dropdown-menu note-check">',function(t,n){var o=e.isArray(n.items)?n.items.map(function(e){var t=typeof e==="string"?e:e.value||"";var o=n.template?n.template(e):e;return'<li><a href="#" data-value="'+t+'">'+L(n.checkClassName)+" "+o+"</a></li>"}).join(""):n.items;t.html(o)});var R=g.create('<div class="note-color-palette"/>',function(e,t){var n=[];for(var o=0,i=t.colors.length;o<i;o++){var r=t.eventName;var a=t.colors[o];var s=[];for(var l=0,c=a.length;l<c;l++){var d=a[l];s.push(['<button type="button" class="note-color-btn"','style="background-color:',d,'" ','data-event="',r,'" ','data-value="',d,'" ','title="',d,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}n.push('<div class="note-color-row">'+s.join("")+"</div>")}e.html(n.join(""));e.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})});var x=g.create('<div class="modal" aria-hidden="false" tabindex="-1"/>',function(e,t){if(t.fade){e.addClass("fade")}e.html(['<div class="modal-dialog">','  <div class="modal-content">',t.title?'    <div class="modal-header">'+'      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+'      <h4 class="modal-title">'+t.title+"</h4>"+"    </div>":"",'    <div class="modal-body">'+t.body+"</div>",t.footer?'    <div class="modal-footer">'+t.footer+"</div>":"","  </div>","</div>"].join(""))});var F=g.create(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(e,t){var n=typeof t.direction!=="undefined"?t.direction:"bottom";e.addClass(n);if(t.hideArrow){e.find(".arrow").hide()}});var L=function(e,t){t=t||"i";return"<"+t+' class="'+e+'"/>'};var A={editor:b,toolbar:k,editingArea:y,codable:C,editable:w,statusbar:N,airEditor:T,airEditable:I,buttonGroup:E,button:S,dropdown:P,dropdownCheck:H,palette:R,dialog:x,popover:F,icon:L,toggleBtn:function(e,t){e.toggleClass("disabled",!t);e.attr("disabled",!t)},toggleBtnActive:function(e,t){e.toggleClass("active",t)},onDialogShown:function(e,t){e.one("shown.bs.modal",t)},onDialogHidden:function(e,t){e.one("hidden.bs.modal",t)},showDialog:function(e){e.modal("show")},hideDialog:function(e){e.modal("hide")},createLayout:function(e,t){var n=(t.airMode?A.airEditor([A.editingArea([A.airEditable()])]):A.editor([A.toolbar(),A.editingArea([A.codable(),A.editable()]),A.statusbar()])).render();n.insertAfter(e);return{note:e,editor:n,toolbar:n.find(".note-toolbar"),editingArea:n.find(".note-editing-area"),editable:n.find(".note-editable"),codable:n.find(".note-codable"),statusbar:n.find(".note-statusbar")}},removeLayout:function(e,t){e.html(t.editable.html());t.editor.remove();e.show()}};e.summernote=e.summernote||{lang:{}};e.extend(e.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var D=function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(t){return n.contains([e.BACKSPACE,e.TAB,e.ENTER,e.SPACE],t)},isMove:function(t){return n.contains([e.LEFT,e.UP,e.RIGHT,e.DOWN],t)},nameFromCode:t.invertObject(e),code:e}}();var M=function(){var o=function(e,t){var o=e.parentElement(),i;var r=document.body.createTextRange(),a;var s=n.from(o.childNodes);for(i=0;i<s.length;i++){if(v.isText(s[i])){continue}r.moveToElementText(s[i]);if(r.compareEndPoints("StartToStart",e)>=0){break}a=s[i]}if(i!==0&&v.isText(s[i-1])){var l=document.body.createTextRange(),c=null;l.moveToElementText(a||o);l.collapse(!a);c=a?a.nextSibling:o.firstChild;var d=e.duplicate();d.setEndPoint("StartToStart",l);var u=d.text.replace(/[\r\n]/g,"").length;while(u>c.nodeValue.length&&c.nextSibling){u-=c.nodeValue.length;c=c.nextSibling}var f=c.nodeValue;if(t&&c.nextSibling&&v.isText(c.nextSibling)&&u===c.nodeValue.length){u-=c.nodeValue.length;c=c.nextSibling}o=c;i=u}return{cont:o,offset:i}};var i=function(e){var o=function(e,i){var r,a;if(v.isText(e)){var s=v.listPrev(e,t.not(v.isText));var l=n.last(s).previousSibling;r=l||e.parentNode;i+=n.sum(n.tail(s),v.nodeLength);a=!l}else{r=e.childNodes[i]||e;if(v.isText(r)){return o(r,0)}i=0;a=false}return{node:r,collapseToStart:a,offset:i}};var i=document.body.createTextRange();var r=o(e.node,e.offset);i.moveToElementText(r.node);i.collapse(r.collapseToStart);i.moveStart("character",r.offset);return i};var r=function(o,a,s,l){this.sc=o;this.so=a;this.ec=s;this.eo=l;var c=function(){if(u.isW3CRangeSupport){var e=document.createRange();e.setStart(o,a);e.setEnd(s,l);return e}else{var t=i({node:o,offset:a});t.setEndPoint("EndToEnd",i({node:s,offset:l}));return t}};this.getPoints=function(){return{sc:o,so:a,ec:s,eo:l}};this.getStartPoint=function(){return{node:o,offset:a}};this.getEndPoint=function(){return{node:s,offset:l}};this.select=function(){var e=c();if(u.isW3CRangeSupport){var t=document.getSelection();if(t.rangeCount>0){t.removeAllRanges()}t.addRange(e)}else{e.select()}return this};this.scrollIntoView=function(t){var n=e(t).height();if(t.scrollTop+n<this.sc.offsetTop){t.scrollTop+=Math.abs(t.scrollTop+n-this.sc.offsetTop)}return this};this.normalize=function(){var e=function(e,t){if(v.isVisiblePoint(e)&&!v.isEdgePoint(e)||v.isVisiblePoint(e)&&v.isRightEdgePoint(e)&&!t||v.isVisiblePoint(e)&&v.isLeftEdgePoint(e)&&t||v.isVisiblePoint(e)&&v.isBlock(e.node)&&v.isEmpty(e.node)){return e}var n=v.ancestor(e.node,v.isBlock);if((v.isLeftEdgePointOf(e,n)||v.isVoid(v.prevPoint(e).node))&&!t||(v.isRightEdgePointOf(e,n)||v.isVoid(v.nextPoint(e).node))&&t){if(v.isVisiblePoint(e)){return e}t=!t}var o=t?v.nextPointUntil(v.nextPoint(e),v.isVisiblePoint):v.prevPointUntil(v.prevPoint(e),v.isVisiblePoint);return o||e};var t=e(this.getEndPoint(),false);var n=this.isCollapsed()?t:e(this.getStartPoint(),true);return new r(n.node,n.offset,t.node,t.offset)};this.nodes=function(e,o){e=e||t.ok;var i=o&&o.includeAncestor;var r=o&&o.fullyContains;var a=this.getStartPoint();var s=this.getEndPoint();var l=[];var c=[];v.walkPoint(a,s,function(t){if(v.isEditable(t.node)){return}var o;if(r){if(v.isLeftEdgePoint(t)){c.push(t.node)}if(v.isRightEdgePoint(t)&&n.contains(c,t.node)){o=t.node}}else if(i){o=v.ancestor(t.node,e)}else{o=t.node}if(o&&e(o)){l.push(o)}},true);return n.unique(l)};this.commonAncestor=function(){return v.commonAncestor(o,s)};this.expand=function(e){var t=v.ancestor(o,e);var n=v.ancestor(s,e);if(!t&&!n){return new r(o,a,s,l)}var i=this.getPoints();if(t){i.sc=t;i.so=0}if(n){i.ec=n;i.eo=v.nodeLength(n)}return new r(i.sc,i.so,i.ec,i.eo)};this.collapse=function(e){if(e){return new r(o,a,o,a)}else{return new r(s,l,s,l)}};this.splitText=function(){var e=o===s;var t=this.getPoints();if(v.isText(s)&&!v.isEdgePoint(this.getEndPoint())){s.splitText(l)}if(v.isText(o)&&!v.isEdgePoint(this.getStartPoint())){t.sc=o.splitText(a);t.so=0;if(e){t.ec=t.sc;t.eo=l-a}}return new r(t.sc,t.so,t.ec,t.eo)};this.deleteContents=function(){if(this.isCollapsed()){return this}var t=this.splitText();var o=t.nodes(null,{fullyContains:true});var i=v.prevPointUntil(t.getStartPoint(),function(e){return!n.contains(o,e.node)});var a=[];e.each(o,function(e,t){var n=t.parentNode;if(i.node!==n&&v.nodeLength(n)===1){a.push(n)}v.remove(t,false)});e.each(a,function(e,t){v.remove(t,false)});return new r(i.node,i.offset,i.node,i.offset).normalize()};var d=function(e){return function(){var t=v.ancestor(o,e);return!!t&&t===v.ancestor(s,e)}};this.isOnEditable=d(v.isEditable);this.isOnList=d(v.isList);this.isOnAnchor=d(v.isAnchor);this.isOnCell=d(v.isCell);this.isLeftEdgeOf=function(e){if(!v.isLeftEdgePoint(this.getStartPoint())){return false}var t=v.ancestor(this.sc,e);return t&&v.isLeftEdgeOf(this.sc,t)};this.isCollapsed=function(){return o===s&&a===l};this.wrapBodyInlineWithPara=function(){if(v.isBodyContainer(o)&&v.isEmpty(o)){o.innerHTML=v.emptyPara;return new r(o.firstChild,0,o.firstChild,0)}var e=this.normalize();if(v.isParaInline(o)||v.isPara(o)){return e}var i;if(v.isInline(e.sc)){var a=v.listAncestor(e.sc,t.not(v.isInline));i=n.last(a);if(!v.isInline(i)){i=a[a.length-2]||e.sc.childNodes[e.so]}}else{i=e.sc.childNodes[e.so>0?e.so-1:0]}var s=v.listPrev(i,v.isParaInline).reverse();s=s.concat(v.listNext(i.nextSibling,v.isParaInline));if(s.length){var l=v.wrap(n.head(s),"p");v.appendChildNodes(l,n.tail(s))}return this.normalize()};this.insertNode=function(e){var t=this.wrapBodyInlineWithPara().deleteContents();var n=v.splitPoint(t.getStartPoint(),v.isInline(e));if(n.rightNode){n.rightNode.parentNode.insertBefore(e,n.rightNode)}else{n.container.appendChild(e)}return e};this.pasteHTML=function(t){var o=e("<div></div>").html(t)[0];var i=n.from(o.childNodes);var r=this.wrapBodyInlineWithPara().deleteContents();return i.reverse().map(function(e){return r.insertNode(e)}).reverse()};this.toString=function(){var e=c();return u.isW3CRangeSupport?e.toString():e.text};this.getWordRange=function(e){var t=this.getEndPoint();if(!v.isCharPoint(t)){return this}var n=v.prevPointUntil(t,function(e){return!v.isCharPoint(e)});if(e){t=v.nextPointUntil(t,function(e){return!v.isCharPoint(e)})}return new r(n.node,n.offset,t.node,t.offset)};this.bookmark=function(e){return{s:{path:v.makeOffsetPath(e,o),offset:a},e:{path:v.makeOffsetPath(e,s),offset:l}}};this.paraBookmark=function(e){return{s:{path:n.tail(v.makeOffsetPath(n.head(e),o)),offset:a},e:{path:n.tail(v.makeOffsetPath(n.last(e),s)),offset:l}}};this.getClientRects=function(){var e=c();return e.getClientRects()}};return{create:function(e,t,n,o){if(arguments.length===4){return new r(e,t,n,o)}else if(arguments.length===2){n=e;o=t;return new r(e,t,n,o)}else{var i=this.createFromSelection();if(!i&&arguments.length===1){i=this.createFromNode(arguments[0]);return i.collapse(v.emptyPara===arguments[0].innerHTML)}return i}},createFromSelection:function(){var e,t,n,i;if(u.isW3CRangeSupport){var a=document.getSelection();if(!a||a.rangeCount===0){return null}else if(v.isBody(a.anchorNode)){return null}var s=a.getRangeAt(0);e=s.startContainer;t=s.startOffset;n=s.endContainer;i=s.endOffset}else{var l=document.selection.createRange();var c=l.duplicate();c.collapse(false);var d=l;d.collapse(true);var f=o(d,true),h=o(c,false);if(v.isText(f.node)&&v.isLeftEdgePoint(f)&&v.isTextNode(h.node)&&v.isRightEdgePoint(h)&&h.node.nextSibling===f.node){f=h}e=f.cont;t=f.offset;n=h.cont;i=h.offset}return new r(e,t,n,i)},createFromNode:function(e){var t=e;var n=0;var o=e;var i=v.nodeLength(o);if(v.isVoid(t)){n=v.listPrev(t).length-1;t=t.parentNode}if(v.isBR(o)){i=v.listPrev(o).length-1;o=o.parentNode}else if(v.isVoid(o)){i=v.listPrev(o).length;o=o.parentNode}return this.create(t,n,o,i)},createFromNodeBefore:function(e){return this.createFromNode(e).collapse(true)},createFromNodeAfter:function(e){return this.createFromNode(e).collapse()},createFromBookmark:function(e,t){var n=v.fromOffsetPath(e,t.s.path);var o=t.s.offset;var i=v.fromOffsetPath(e,t.e.path);var a=t.e.offset;return new r(n,o,i,a)},createFromParaBookmark:function(e,t){var o=e.s.offset;var i=e.e.offset;var a=v.fromOffsetPath(n.head(t),e.s.path);var s=v.fromOffsetPath(n.last(t),e.e.path);return new r(a,o,s,i)}}}();var z=function(){var t=function(t){return e.Deferred(function(n){e.extend(new FileReader,{onload:function(e){var t=e.target.result;n.resolve(t)},onerror:function(){n.reject(this)}}).readAsDataURL(t)}).promise()};var n=function(t){return e.Deferred(function(n){var o=e("<img>");
o.one("load",function(){o.off("error abort");n.resolve(o)}).one("error abort",function(){o.off("load").detach();n.reject(o)}).css({display:"none"}).appendTo(document.body).attr("src",t)}).promise()};return{readFileAsDataURL:t,createImage:n}}();var B=function(e){var t=[],n=-1;var o=e[0];var i=function(){var t=M.create(o);var n={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:e.html(),bookmark:t?t.bookmark(o):n}};var r=function(t){if(t.contents!==null){e.html(t.contents)}if(t.bookmark!==null){M.createFromBookmark(o,t.bookmark).select()}};this.rewind=function(){if(e.html()!==t[n].contents){this.recordUndo()}n=0;r(t[n])};this.reset=function(){t=[];n=-1;e.html("");this.recordUndo()};this.undo=function(){if(e.html()!==t[n].contents){this.recordUndo()}if(0<n){n--;r(t[n])}};this.redo=function(){if(t.length-1>n){n++;r(t[n])}};this.recordUndo=function(){n++;if(t.length>n){t=t.slice(0,n)}t.push(i())}};var $=function(){var o=function(t,n){if(u.jqueryVersion<1.9){var o={};e.each(n,function(e,n){o[n]=t.css(n)});return o}return t.css.call(t,n)};this.fromNode=function(e){var t=["font-family","font-size","text-align","list-style-type","line-height"];var n=o(e,t)||{};n["font-size"]=parseInt(n["font-size"],10);return n};this.stylePara=function(t,n){e.each(t.nodes(v.isPara,{includeAncestor:true}),function(t,o){e(o).css(n)})};this.styleNodes=function(o,i){o=o.splitText();var r=i&&i.nodeName||"SPAN";var a=!!(i&&i.expandClosestSibling);var s=!!(i&&i.onlyPartialContains);if(o.isCollapsed()){return[o.insertNode(v.create(r))]}var l=v.makePredByNodeName(r);var c=o.nodes(v.isText,{fullyContains:true}).map(function(e){return v.singleChildAncestor(e,l)||v.wrap(e,r)});if(a){if(s){var d=o.nodes();l=t.and(l,function(e){return n.contains(d,e)})}return c.map(function(t){var o=v.withClosestSiblings(t,l);var i=n.head(o);var r=n.tail(o);e.each(r,function(e,t){v.appendChildNodes(i,t.childNodes);v.remove(t)});return n.head(o)})}else{return c}};this.current=function(t){var n=e(!v.isElement(t.sc)?t.sc.parentNode:t.sc);var o=this.fromNode(n);try{o=e.extend(o,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal"})}catch(e){}if(!t.isOnList()){o["list-style"]="none"}else{var i=["circle","disc","disc-leading-zero","square"];var r=e.inArray(o["list-style-type"],i)>-1;o["list-style"]=r?"unordered":"ordered"}var a=v.ancestor(t.sc,v.isPara);if(a&&a.style["line-height"]){o["line-height"]=a.style.lineHeight}else{var s=parseInt(o["line-height"],10)/parseInt(o["font-size"],10);o["line-height"]=s.toFixed(1)}o.anchor=t.isOnAnchor()&&v.ancestor(t.sc,v.isAnchor);o.ancestors=v.listAncestor(t.sc,v.isEditable);o.range=t;return o}};var U=function(){var o=this;this.insertOrderedList=function(e){this.toggleList("OL",e)};this.insertUnorderedList=function(e){this.toggleList("UL",e)};this.indent=function(o){var i=this;var r=M.create(o).wrapBodyInlineWithPara();var a=r.nodes(v.isPara,{includeAncestor:true});var s=n.clusterBy(a,t.peq2("parentNode"));e.each(s,function(t,o){var r=n.head(o);if(v.isLi(r)){i.wrapList(o,r.parentNode.nodeName)}else{e.each(o,function(t,n){e(n).css("marginLeft",function(e,t){return(parseInt(t,10)||0)+25})})}});r.select()};this.outdent=function(o){var i=this;var r=M.create(o).wrapBodyInlineWithPara();var a=r.nodes(v.isPara,{includeAncestor:true});var s=n.clusterBy(a,t.peq2("parentNode"));e.each(s,function(t,o){var r=n.head(o);if(v.isLi(r)){i.releaseList([o])}else{e.each(o,function(t,n){e(n).css("marginLeft",function(e,t){t=parseInt(t,10)||0;return t>25?t-25:""})})}});r.select()};this.toggleList=function(i,r){var a=M.create(r).wrapBodyInlineWithPara();var s=a.nodes(v.isPara,{includeAncestor:true});var l=a.paraBookmark(s);var c=n.clusterBy(s,t.peq2("parentNode"));if(n.find(s,v.isPurePara)){var d=[];e.each(c,function(e,t){d=d.concat(o.wrapList(t,i))});s=d}else{var u=a.nodes(v.isList,{includeAncestor:true}).filter(function(t){return!e.nodeName(t,i)});if(u.length){e.each(u,function(e,t){v.replace(t,i)})}else{s=this.releaseList(c,true)}}M.createFromParaBookmark(l,s).select()};this.wrapList=function(e,t){var o=n.head(e);var i=n.last(e);var r=v.isList(o.previousSibling)&&o.previousSibling;var a=v.isList(i.nextSibling)&&i.nextSibling;var s=r||v.insertAfter(v.create(t||"UL"),i);e=e.map(function(e){return v.isPurePara(e)?v.replace(e,"LI"):e});v.appendChildNodes(s,e);if(a){v.appendChildNodes(s,n.from(a.childNodes));v.remove(a)}return e};this.releaseList=function(t,o){var i=[];e.each(t,function(t,r){var a=n.head(r);var s=n.last(r);var l=o?v.lastAncestor(a,v.isList):a.parentNode;var c=l.childNodes.length>1?v.splitTree(l,{node:s.parentNode,offset:v.position(s)+1},{isSkipPaddingBlankHTML:true}):null;var d=v.splitTree(l,{node:a.parentNode,offset:v.position(a)},{isSkipPaddingBlankHTML:true});r=o?v.listDescendant(d,v.isLi):n.from(d.childNodes).filter(v.isLi);if(o||!v.isList(l.parentNode)){r=r.map(function(e){return v.replace(e,"P")})}e.each(n.from(r).reverse(),function(e,t){v.insertAfter(t,l)});var u=n.compact([l,d,c]);e.each(u,function(t,n){var o=[n].concat(v.listDescendant(n,v.isList));e.each(o.reverse(),function(e,t){if(!v.nodeLength(t)){v.remove(t,true)}})});i=i.concat(r)});return i}};var O=function(){var t=new U;this.insertTab=function(e,t){var n=v.createText(new Array(t+1).join(v.NBSP_CHAR));e=e.deleteContents();e.insertNode(n,true);e=M.create(n,t);e.select()};this.insertParagraph=function(n){var o=M.create(n);o=o.deleteContents();o=o.wrapBodyInlineWithPara();var i=v.ancestor(o.sc,v.isPara);var r;if(i){if(v.isEmpty(i)&&v.isLi(i)){t.toggleList(i.parentNode.nodeName);return}else if(v.isEmpty(i)&&v.isPara(i)&&v.isBlockquote(i.parentNode)){v.insertAfter(i,i.parentNode);r=i}else{r=v.splitTree(i,o.getStartPoint());var a=v.listDescendant(i,v.isEmptyAnchor);a=a.concat(v.listDescendant(r,v.isEmptyAnchor));e.each(a,function(e,t){v.remove(t)});if((v.isHeading(r)||v.isPre(r))&&v.isEmpty(r)){r=v.replace(r,"p")}}}else{var s=o.sc.childNodes[o.so];r=e(v.emptyPara)[0];if(s){o.sc.insertBefore(r,s)}else{o.sc.appendChild(r)}}M.create(r,0).normalize().select().scrollIntoView(n)}};var j=function(){this.tab=function(e,t){var o=v.ancestor(e.commonAncestor(),v.isCell);var i=v.ancestor(o,v.isTable);var r=v.listDescendant(i,v.isCell);var a=n[t?"prev":"next"](r,o);if(a){M.create(a,0).select()}};this.createTable=function(t,n,o){var i=[],r;for(var a=0;a<t;a++){i.push("<td>"+v.blank+"</td>")}r=i.join("");var s=[],l;for(var c=0;c<n;c++){s.push("<tr>"+r+"</tr>")}l=s.join("");var d=e("<table>"+l+"</table>");if(o&&o.tableClassName){d.addClass(o.tableClassName)}return d[0]}};var K="bogus";var V=function(t){var o=this;var i=t.layoutInfo.note;var r=t.layoutInfo.editor;var a=t.layoutInfo.editable;var s=t.options;var l=s.langInfo;var c=a[0];var d=null;var f=new $;var h=new j;var m=new O;var p=new U;var g=new B(a);this.initialize=function(){a.on("keydown",function(e){if(e.keyCode===D.code.ENTER){t.triggerEvent("enter",e)}t.triggerEvent("keydown",e);if(s.shortcuts&&!e.isDefaultPrevented()){o.handleKeyMap(e)}}).on("keyup",function(e){t.triggerEvent("keyup",e)}).on("focus",function(e){t.triggerEvent("focus",e)}).on("blur",function(e){t.triggerEvent("blur",e)}).on("mousedown",function(e){t.triggerEvent("mousedown",e)}).on("mouseup",function(e){t.triggerEvent("mouseup",e)}).on("scroll",function(e){t.triggerEvent("scroll",e)}).on("paste",function(e){t.triggerEvent("paste",e)});a.html(v.html(i)||v.emptyPara);var e=u.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";a.on(e,function(){t.triggerEvent("change",a.html())});r.on("focusin",function(e){t.triggerEvent("focusin",e)}).on("focusout",function(e){t.triggerEvent("focusout",e)});if(!s.airMode&&s.height){this.setHeight(s.height)}if(!s.airMode&&s.maxHeight){a.css("max-height",s.maxHeight)}if(!s.airMode&&s.minHeight){a.css("min-height",s.minHeight)}g.recordUndo()};this.destroy=function(){a.off()};this.handleKeyMap=function(e){var n=s.keyMap[u.isMac?"mac":"pc"];var o=[];if(e.metaKey){o.push("CMD")}if(e.ctrlKey&&!e.altKey){o.push("CTRL")}if(e.shiftKey){o.push("SHIFT")}var i=D.nameFromCode[e.keyCode];if(i){o.push(i)}var r=n[o.join("+")];if(r){e.preventDefault();t.invoke(r)}else if(D.isEdit(e.keyCode)){this.afterCommand()}};this.createRange=function(){this.focus();return M.create(c)};this.saveRange=function(e){d=this.createRange();if(e){d.collapse().select()}};this.restoreRange=function(){if(d){d.select();this.focus()}};this.saveTarget=function(e){a.data("target",e)};this.clearTarget=function(){a.removeData("target")};this.restoreTarget=function(){return a.data("target")};this.currentStyle=function(){var e=M.create();if(e){e=e.normalize()}return e?f.current(e):f.fromNode(a)};this.styleFromNode=function(e){return f.fromNode(e)};this.undo=function(){t.triggerEvent("before.command",a.html());g.undo();t.triggerEvent("change",a.html())};t.memo("help.undo",l.help.undo);this.redo=function(){t.triggerEvent("before.command",a.html());g.redo();t.triggerEvent("change",a.html())};t.memo("help.redo",l.help.redo);var b=this.beforeCommand=function(){t.triggerEvent("before.command",a.html());o.focus()};var k=this.afterCommand=function(e){g.recordUndo();if(!e){t.triggerEvent("change",a.html())}};var y=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"];for(var C=0,w=y.length;C<w;C++){this[y[C]]=function(e){return function(t){b();document.execCommand(e,false,t);k(true)}}(y[C]);t.memo("help."+y[C],l.help[y[C]])}this.tab=function(){var e=this.createRange();if(e.isCollapsed()&&e.isOnCell()){h.tab(e)}else{b();m.insertTab(e,s.tabSize);k()}};t.memo("help.tab",l.help.tab);this.untab=function(){var e=this.createRange();if(e.isCollapsed()&&e.isOnCell()){h.tab(e,true)}};t.memo("help.untab",l.help.untab);this.wrapCommand=function(e){return function(){b();e.apply(o,arguments);k()}};this.insertParagraph=this.wrapCommand(function(){m.insertParagraph(c)});t.memo("help.insertParagraph",l.help.insertParagraph);this.insertOrderedList=this.wrapCommand(function(){p.insertOrderedList(c)});t.memo("help.insertOrderedList",l.help.insertOrderedList);this.insertUnorderedList=this.wrapCommand(function(){p.insertUnorderedList(c)});t.memo("help.insertUnorderedList",l.help.insertUnorderedList);this.indent=this.wrapCommand(function(){p.indent(c)});t.memo("help.indent",l.help.indent);this.outdent=this.wrapCommand(function(){p.outdent(c)});t.memo("help.outdent",l.help.outdent);this.insertImage=function(e,n){return z.createImage(e,n).then(function(e){b();if(typeof n==="function"){n(e)}else{if(typeof n==="string"){e.attr("data-filename",n)}e.css("width",Math.min(a.width(),e.width()))}e.show();M.create(c).insertNode(e[0]);M.createFromNodeAfter(e[0]).select();k()}).fail(function(e){t.triggerEvent("image.upload.error",e)})};this.insertImages=function(n){e.each(n,function(e,n){var i=n.name;if(s.maximumImageFileSize&&s.maximumImageFileSize<n.size){t.triggerEvent("image.upload.error",l.image.maximumFileSizeError)}else{z.readFileAsDataURL(n).then(function(e){return o.insertImage(e,i)}).fail(function(){t.triggerEvent("image.upload.error")})}})};this.insertImagesOrCallback=function(e){var n=s.callbacks;if(n.onImageUpload){t.triggerEvent("image.upload",e)}else{this.insertImages(e)}};this.insertNode=this.wrapCommand(function(e){var t=this.createRange();t.insertNode(e);M.createFromNodeAfter(e).select()});this.insertText=this.wrapCommand(function(e){var t=this.createRange();var n=t.insertNode(v.createText(e));M.create(n,v.nodeLength(n)).select()});this.getSelectedText=function(){var e=this.createRange();if(e.isOnAnchor()){e=M.createFromNode(v.ancestor(e.sc,v.isAnchor))}return e.toString()};this.pasteHTML=this.wrapCommand(function(e){var t=this.createRange().pasteHTML(e);M.createFromNodeAfter(n.last(t)).select()});this.formatBlock=this.wrapCommand(function(e){e=u.isMSIE?"<"+e+">":e;document.execCommand("FormatBlock",false,e)});this.formatPara=function(){this.formatBlock("P")};t.memo("help.formatPara",l.help.formatPara);for(var C=1;C<=6;C++){this["formatH"+C]=function(e){return function(){this.formatBlock("H"+e)}}(C);t.memo("help.formatH"+C,l.help["formatH"+C])}this.fontSize=function(t){var o=this.createRange();if(o&&o.isCollapsed()){var i=f.styleNodes(o);var r=n.head(i);e(i).css({"font-size":t+"px"});if(r&&!v.nodeLength(r)){r.innerHTML=v.ZERO_WIDTH_NBSP_CHAR;M.createFromNodeAfter(r.firstChild).select();a.data(K,r)}}else{b();e(f.styleNodes(o)).css({"font-size":t+"px"});k()}};this.insertHorizontalRule=this.wrapCommand(function(){var e=this.createRange().insertNode(v.create("HR"));if(e.nextSibling){M.create(e.nextSibling,0).normalize().select()}});t.memo("help.insertHorizontalRule",l.help.insertHorizontalRule);this.removeBogus=function(){var e=a.data(K);if(!e){return}var t=n.find(n.from(e.childNodes),v.isText);var o=t.nodeValue.indexOf(v.ZERO_WIDTH_NBSP_CHAR);if(o!==-1){t.deleteData(o,1)}if(v.isEmpty(e)){v.remove(e)}a.removeData(K)};this.lineHeight=this.wrapCommand(function(e){f.stylePara(this.createRange(),{lineHeight:e})});this.unlink=function(){var e=this.createRange();if(e.isOnAnchor()){var t=v.ancestor(e.sc,v.isAnchor);e=M.createFromNode(t);e.select();b();document.execCommand("unlink");k()}};this.createLink=this.wrapCommand(function(t){var o=t.url;var i=t.text;var r=t.isNewWindow;var a=t.range||this.createRange();var l=a.toString()!==i;if(s.onCreateLink){o=s.onCreateLink(o)}var c=[];if(l){a=a.deleteContents();var d=a.insertNode(e("<A>"+i+"</A>")[0]);c.push(d)}else{c=f.styleNodes(a,{nodeName:"A",expandClosestSibling:true,onlyPartialContains:true})}e.each(c,function(t,n){e(n).attr("href",o);if(r){e(n).attr("target","_blank")}else{e(n).removeAttr("target")}});var u=M.createFromNodeBefore(n.head(c));var h=u.getStartPoint();var v=M.createFromNodeAfter(n.last(c));var m=v.getEndPoint();M.create(h.node,h.offset,m.node,m.offset).select()});this.getLinkInfo=function(){var t=this.createRange().expand(v.isAnchor);var o=e(n.head(t.nodes(v.isAnchor)));return{range:t,text:t.toString(),isNewWindow:o.length?o.attr("target")==="_blank":false,url:o.length?o.attr("href"):""}};this.color=this.wrapCommand(function(e){var t=e.foreColor;var n=e.backColor;if(t){document.execCommand("foreColor",false,t)}if(n){document.execCommand("backColor",false,n)}});this.insertTable=this.wrapCommand(function(e){var t=e.split("x");var n=this.createRange().deleteContents();n.insertNode(h.createTable(t[0],t[1],s))});this.floatMe=this.wrapCommand(function(t){var n=e(this.restoreTarget());n.css("float",t)});this.resize=this.wrapCommand(function(t){var n=e(this.restoreTarget());n.css({width:t*100+"%",height:""})});this.resizeTo=function(e,t,n){var o;if(n){var i=e.y/e.x;var r=t.data("ratio");o={width:r>i?e.x:e.y/r,height:r>i?e.x*r:e.y}}else{o={width:e.x,height:e.y}}t.css(o)};this.removeMedia=this.wrapCommand(function(){var n=e(this.restoreTarget()).detach();t.triggerEvent("media.delete",n,a)});this.hasFocus=function(){return a.is(":focus")};this.focus=function(){if(!this.hasFocus()){a.focus()}};this.isEmpty=function(){return v.isEmpty(a[0])||v.emptyPara===a.html()};this.empty=function(){t.invoke("code",v.emptyPara)};this.setHeight=function(e){a.outerHeight(e)}};var W=function(t){var o=this;var i=t.layoutInfo.editable;this.events={"summernote.keydown":function(e,n){if(o.needKeydownHook()){if((n.ctrlKey||n.metaKey)&&n.keyCode===D.code.V){t.invoke("editor.saveRange");o.$paste.focus();setTimeout(function(){o.pasteByHook()},0)}}}};this.needKeydownHook=function(){return u.isMSIE&&u.browserVersion>10||u.isFF};this.initialize=function(){if(this.needKeydownHook()){this.$paste=e("<div />").attr("contenteditable",true).css({position:"absolute",left:-1e5,opacity:0});i.before(this.$paste);this.$paste.on("paste",function(e){t.triggerEvent("paste",e)})}else{i.on("paste",this.pasteByEvent)}};this.destroy=function(){if(this.needKeydownHook()){this.$paste.remove();this.$paste=null}};this.pasteByHook=function(){var n=this.$paste[0].firstChild;if(v.isImg(n)){var o=n.src;var i=atob(o.split(",")[1]);var r=new Uint8Array(i.length);for(var a=0;a<i.length;a++){r[a]=i.charCodeAt(a)}var s=new Blob([r],{type:"image/png"});s.name="clipboard.png";t.invoke("editor.restoreRange");t.invoke("editor.focus");t.invoke("editor.insertImagesOrCallback",[s])}else{var l=e("<div />").html(this.$paste.html()).html();t.invoke("editor.restoreRange");t.invoke("editor.focus");if(l){t.invoke("editor.pasteHTML",l)}}this.$paste.empty()};this.pasteByEvent=function(e){var o=e.originalEvent.clipboardData;if(o&&o.items&&o.items.length){var i=n.head(o.items);if(i.kind==="file"&&i.type.indexOf("image/")!==-1){t.invoke("editor.insertImagesOrCallback",[i.getAsFile()])}t.invoke("editor.afterCommand")}}};var q=function(t){var n=e(document);var o=t.layoutInfo.editor;var i=t.layoutInfo.editable;var r=t.options;var a=r.langInfo;var s=e(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(o);this.initialize=function(){if(r.disableDragAndDrop){n.on("drop",function(e){e.preventDefault()})}else{this.attachDragAndDropEvent()}};this.attachDragAndDropEvent=function(){var r=e(),l=s.find(".note-dropzone-message");n.on("dragenter",function(e){var n=t.invoke("codeview.isActivated");var i=o.width()>0&&o.height()>0;if(!n&&!r.length&&i){o.addClass("dragover");s.width(o.width());s.height(o.height());l.text(a.image.dragImageHere)}r=r.add(e.target)}).on("dragleave",function(e){r=r.not(e.target);if(!r.length){o.removeClass("dragover")}}).on("drop",function(){r=e();o.removeClass("dragover")});s.on("dragenter",function(){s.addClass("hover");l.text(a.image.dropImage)}).on("dragleave",function(){s.removeClass("hover");l.text(a.image.dragImageHere)});s.on("drop",function(n){var o=n.originalEvent.dataTransfer;if(o&&o.files&&o.files.length){n.preventDefault();i.focus();t.invoke("editor.insertImagesOrCallback",o.files)}else{e.each(o.types,function(n,i){var r=o.getData(i);if(i.toLowerCase().indexOf("text")>-1){t.invoke("editor.pasteHTML",r)}else{e(r).each(function(){t.invoke("editor.insertNode",this)})}})}}).on("dragover",false)}};var _;if(u.hasCodeMirror){if(u.isSupportAmd){require(["codemirror"],function(e){_=e})}else{_=window.CodeMirror}}var G=function(e){var t=e.layoutInfo.editor;var n=e.layoutInfo.editable;var o=e.layoutInfo.codable;var i=e.options;this.sync=function(){var e=this.isActivated();if(e&&u.hasCodeMirror){o.data("cmEditor").save()}};this.isActivated=function(){return t.hasClass("codeview")};this.toggle=function(){if(this.isActivated()){this.deactivate()}else{this.activate()}e.triggerEvent("codeview.toggled")};this.activate=function(){o.val(v.html(n,i.prettifyHtml));o.height(n.height());e.invoke("toolbar.updateCodeview",true);t.addClass("codeview");o.focus();if(u.hasCodeMirror){var r=_.fromTextArea(o[0],i.codemirror);if(i.codemirror.tern){var a=new _.TernServer(i.codemirror.tern);r.ternServer=a;r.on("cursorActivity",function(e){a.updateArgHints(e)})}r.setSize(null,n.outerHeight());o.data("cmEditor",r)}};this.deactivate=function(){if(u.hasCodeMirror){var r=o.data("cmEditor");o.val(r.getValue());r.toTextArea()}var a=v.value(o,i.prettifyHtml)||v.emptyPara;var s=n.html()!==a;n.html(a);n.height(i.height?o.height():"auto");t.removeClass("codeview");if(s){e.triggerEvent("change",n.html(),n)}n.focus();e.invoke("toolbar.updateCodeview",false)};this.destroy=function(){if(this.isActivated()){this.deactivate()}}};var Y=24;var Z=function(t){var n=e(document);var o=t.layoutInfo.statusbar;var i=t.layoutInfo.editable;var r=t.options;this.initialize=function(){if(r.airMode||r.disableResizeEditor){return}o.on("mousedown",function(e){e.preventDefault();e.stopPropagation();var t=i.offset().top-n.scrollTop();n.on("mousemove",function(e){var n=e.clientY-(t+Y);n=r.minheight>0?Math.max(n,r.minheight):n;n=r.maxHeight>0?Math.min(n,r.maxHeight):n;i.height(n)}).one("mouseup",function(){n.off("mousemove")})})};this.destroy=function(){o.off()}};var J=function(t){var n=t.layoutInfo.editor;var o=t.layoutInfo.toolbar;var i=t.layoutInfo.editable;var r=t.layoutInfo.codable;var a=e(window);var s=e("html, body");this.toggle=function(){var e=function(e){i.css("height",e.h);r.css("height",e.h);if(r.data("cmeditor")){r.data("cmeditor").setsize(null,e.h)}};n.toggleClass("fullscreen");if(this.isFullscreen()){i.data("orgHeight",i.css("height"));a.on("resize",function(){e({h:a.height()-o.outerHeight()})}).trigger("resize");s.css("overflow","hidden")}else{a.off("resize");e({h:i.data("orgHeight")});s.css("overflow","visible")}t.invoke("toolbar.updateFullscreen",this.isFullscreen())};this.isFullscreen=function(){return n.hasClass("fullscreen")}};var Q=function(t){var n=this;var o=e(document);var i=t.layoutInfo.editingArea;var r=t.options;this.events={"summernote.mousedown":function(e,t){if(n.update(t.target)){t.preventDefault()}},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){n.update()}};this.initialize=function(){this.$handle=e(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',r.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',r.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(i);this.$handle.on("mousedown",function(e){if(v.isControlSizing(e.target)){e.preventDefault();e.stopPropagation();var i=n.$handle.find(".note-control-selection").data("target"),r=i.offset(),a=o.scrollTop();o.on("mousemove",function(e){t.invoke("editor.resizeTo",{x:e.clientX-r.left,y:e.clientY-(r.top-a)},i,!e.shiftKey);n.update(i[0])}).one("mouseup",function(e){e.preventDefault();o.off("mousemove");t.invoke("editor.afterCommand")});if(!i.data("ratio")){i.data("ratio",i.height()/i.width())}}})};this.destroy=function(){this.$handle.remove()};this.update=function(n){var o=v.isImg(n);var i=this.$handle.find(".note-control-selection");t.invoke("imagePopover.update",n);if(o){var r=e(n);var a=r.position();var s={w:r.outerWidth(true),h:r.outerHeight(true)};i.css({display:"block",left:a.left,top:a.top,width:s.w,height:s.h}).data("target",r);var l=s.w+"x"+s.h;i.find(".note-control-selection-info").text(l);t.invoke("editor.saveTarget",n)}else{this.hide()}return o};this.hide=function(){t.invoke("editor.clearTarget");this.$handle.children().hide()}};var X=function(t){var o=this;var i="http://";var r=/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;this.events={"summernote.keyup":function(e,t){if(!t.isDefaultPrevented()){o.handleKeyup(t)}},"summernote.keydown":function(e,t){o.handleKeydown(t)}};this.initialize=function(){this.lastWordRange=null};this.destroy=function(){this.lastWordRange=null};this.replace=function(){if(!this.lastWordRange){return}var n=this.lastWordRange.toString();var o=n.match(r);if(o&&(o[1]||o[2])){var a=o[1]?n:i+n;var s=e("<a />").html(n).attr("href",a)[0];this.lastWordRange.insertNode(s);this.lastWordRange=null;t.invoke("editor.focus")}};this.handleKeydown=function(e){if(n.contains([D.code.ENTER,D.code.SPACE],e.keyCode)){var o=t.invoke("editor.createRange").getWordRange();this.lastWordRange=o}};this.handleKeyup=function(e){if(n.contains([D.code.ENTER,D.code.SPACE],e.keyCode)){this.replace()}}};var ee=function(e){var t=e.layoutInfo.note;this.events={"summernote.change":function(){t.val(e.invoke("code"))}};this.shouldInitialize=function(){return v.isTextarea(t[0])}};var te=function(t){var n=this;var o=t.layoutInfo.editingArea;var i=t.options;this.events={"summernote.init summernote.change":function(){n.update()},"summernote.codeview.toggled":function(){n.update()}};this.shouldInitialize=function(){return!!i.placeholder};this.initialize=function(){this.$placeholder=e('<div class="note-placeholder">');this.$placeholder.on("click",function(){t.invoke("focus")}).text(i.placeholder).prependTo(o)};this.destroy=function(){this.$placeholder.remove()};this.update=function(){var e=!t.invoke("codeview.isActivated")&&t.invoke("editor.isEmpty");this.$placeholder.toggle(e)}};var ne=function(o){var i=this;var r=e.summernote.ui;var a=o.layoutInfo.toolbar;var s=o.options;var l=s.langInfo;var c=t.invertObject(s.keyMap[u.isMac?"mac":"pc"]);var d=this.representShortcut=function(e){var t=c[e];if(u.isMac){t=t.replace("CMD","⌘").replace("SHIFT","⇧")}t=t.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]");return" ("+t+")"};this.initialize=function(){this.addToolbarButtons();this.addImagePopoverButtons();this.addLinkPopoverButtons();this.fontInstalledMap={}};this.destroy=function(){delete this.fontInstalledMap};this.isFontInstalled=function(e){if(!i.fontInstalledMap.hasOwnProperty(e)){i.fontInstalledMap[e]=u.isFontInstalled(e)||n.contains(s.fontNamesIgnoreCheck,e)}return i.fontInstalledMap[e]};this.addToolbarButtons=function(){o.memo("button.style",function(){return r.buttonGroup([r.button({className:"dropdown-toggle",contents:r.icon(s.icons.magic)+" "+r.icon(s.icons.caret,"span"),tooltip:l.style.style,data:{toggle:"dropdown"}}),r.dropdown({className:"dropdown-style",items:o.options.styleTags,template:function(e){if(typeof e==="string"){e={tag:e,title:e}}var t=e.tag;var n=e.title;var o=e.style?' style="'+e.style+'" ':"";var i=e.className?' className="'+e.className+'"':"";return"<"+t+o+i+">"+n+"</"+t+">"},click:o.createInvokeHandler("editor.formatBlock")})]).render()});o.memo("button.bold",function(){return r.button({className:"note-btn-bold",contents:r.icon(s.icons.bold),tooltip:l.font.bold+d("bold"),click:o.createInvokeHandler("editor.bold")}).render()});o.memo("button.italic",function(){return r.button({className:"note-btn-italic",contents:r.icon(s.icons.italic),tooltip:l.font.italic+d("italic"),click:o.createInvokeHandler("editor.italic")}).render()});o.memo("button.underline",function(){return r.button({className:"note-btn-underline",contents:r.icon(s.icons.underline),tooltip:l.font.underline+d("underline"),click:o.createInvokeHandler("editor.underline")}).render()});o.memo("button.clear",function(){return r.button({contents:r.icon(s.icons.eraser),tooltip:l.font.clear+d("removeFormat"),click:o.createInvokeHandler("editor.removeFormat")}).render()});o.memo("button.strikethrough",function(){return r.button({className:"note-btn-strikethrough",contents:r.icon(s.icons.strikethrough),tooltip:l.font.strikethrough+d("strikethrough"),click:o.createInvokeHandler("editor.strikethrough")}).render()});o.memo("button.superscript",function(){return r.button({className:"note-btn-superscript",contents:r.icon(s.icons.superscript),tooltip:l.font.superscript,click:o.createInvokeHandler("editor.superscript")}).render()});o.memo("button.subscript",function(){return r.button({className:"note-btn-subscript",contents:r.icon(s.icons.subscript),tooltip:l.font.subscript,click:o.createInvokeHandler("editor.subscript")}).render()});o.memo("button.fontname",function(){return r.buttonGroup([r.button({className:"dropdown-toggle",contents:'<span class="note-current-fontname"/> '+r.icon(s.icons.caret,"span"),tooltip:l.font.name,data:{toggle:"dropdown"}}),r.dropdownCheck({className:"dropdown-fontname",checkClassName:s.icons.menuCheck,items:s.fontNames.filter(i.isFontInstalled),template:function(e){return'<span style="font-family:'+e+'">'+e+"</span>"},click:o.createInvokeHandler("editor.fontName")})]).render()});o.memo("button.fontsize",function(){return r.buttonGroup([r.button({className:"dropdown-toggle",contents:'<span class="note-current-fontsize"/>'+r.icon(s.icons.caret,"span"),tooltip:l.font.size,data:{toggle:"dropdown"}}),r.dropdownCheck({className:"dropdown-fontsize",checkClassName:s.icons.menuCheck,items:s.fontSizes,click:o.createInvokeHandler("editor.fontSize")})]).render()});o.memo("button.color",function(){return r.buttonGroup({className:"note-color",children:[r.button({className:"note-current-color-button",contents:r.icon(s.icons.font+" note-recent-color"),tooltip:l.color.recent,click:function(t){var n=e(t.currentTarget);o.invoke("editor.color",{backColor:n.attr("data-backColor"),foreColor:n.attr("data-foreColor")})},callback:function(e){var t=e.find(".note-recent-color");t.css("background-color","#FFFF00");e.attr("data-backColor","#FFFF00")}}),r.button({className:"dropdown-toggle",contents:r.icon(s.icons.caret,"span"),tooltip:l.color.more,data:{toggle:"dropdown"}}),r.dropdown({items:["<li>",'<div class="btn-group">','  <div class="note-palette-title">'+l.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="backColor" data-value="inherit">',l.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"</div>",'<div class="btn-group">','  <div class="note-palette-title">'+l.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="removeFormat" data-value="foreColor">',l.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"</div>","</li>"].join(""),callback:function(t){t.find(".note-holder").each(function(){var t=e(this);t.append(r.palette({colors:s.colors,eventName:t.data("event")}).render())})},click:function(t){var n=e(t.target);var i=n.data("event");var r=n.data("value");if(i&&r){var a=i==="backColor"?"background-color":"color";var s=n.closest(".note-color").find(".note-recent-color");var l=n.closest(".note-color").find(".note-current-color-button");s.css(a,r);l.attr("data-"+i,r);o.invoke("editor."+i,r)}}})]}).render()});o.memo("button.ul",function(){return r.button({contents:r.icon(s.icons.unorderedlist),tooltip:l.lists.unordered+d("insertUnorderedList"),click:o.createInvokeHandler("editor.insertUnorderedList")}).render()});o.memo("button.ol",function(){return r.button({contents:r.icon(s.icons.orderedlist),tooltip:l.lists.ordered+d("insertOrderedList"),click:o.createInvokeHandler("editor.insertOrderedList")}).render()});var n=r.button({contents:r.icon(s.icons.alignLeft),tooltip:l.paragraph.left+d("justifyLeft"),click:o.createInvokeHandler("editor.justifyLeft")});var a=r.button({contents:r.icon(s.icons.alignCenter),tooltip:l.paragraph.center+d("justifyCenter"),click:o.createInvokeHandler("editor.justifyCenter")});var c=r.button({contents:r.icon(s.icons.alignRight),tooltip:l.paragraph.right+d("justifyRight"),click:o.createInvokeHandler("editor.justifyRight")});var u=r.button({contents:r.icon(s.icons.alignJustify),tooltip:l.paragraph.justify+d("justifyFull"),click:o.createInvokeHandler("editor.justifyFull")});var f=r.button({contents:r.icon(s.icons.outdent),tooltip:l.paragraph.outdent+d("outdent"),click:o.createInvokeHandler("editor.outdent")});var h=r.button({contents:r.icon(s.icons.indent),tooltip:l.paragraph.indent+d("indent"),click:o.createInvokeHandler("editor.indent")});o.memo("button.justifyLeft",t.invoke(n,"render"));o.memo("button.justifyCenter",t.invoke(a,"render"));o.memo("button.justifyRight",t.invoke(c,"render"));o.memo("button.justifyFull",t.invoke(u,"render"));o.memo("button.outdent",t.invoke(f,"render"));o.memo("button.indent",t.invoke(h,"render"));o.memo("button.paragraph",function(){return r.buttonGroup([r.button({className:"dropdown-toggle",contents:r.icon(s.icons.alignLeft)+" "+r.icon(s.icons.caret,"span"),tooltip:l.paragraph.paragraph,data:{toggle:"dropdown"}}),r.dropdown([r.buttonGroup({className:"note-align",children:[n,a,c,u]}),r.buttonGroup({className:"note-list",children:[f,h]})])]).render()});o.memo("button.height",function(){
return r.buttonGroup([r.button({className:"dropdown-toggle",contents:r.icon(s.icons.textHeight)+" "+r.icon(s.icons.caret,"span"),tooltip:l.font.height,data:{toggle:"dropdown"}}),r.dropdownCheck({items:s.lineHeights,checkClassName:s.icons.menuCheck,className:"dropdown-line-height",click:o.createInvokeHandler("editor.lineHeight")})]).render()});o.memo("button.table",function(){return r.buttonGroup([r.button({className:"dropdown-toggle",contents:r.icon(s.icons.table)+" "+r.icon(s.icons.caret,"span"),tooltip:l.table.table,data:{toggle:"dropdown"}}),r.dropdown({className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(e){var t=e.find(".note-dimension-picker-mousecatcher");t.css({width:s.insertTableMaxSize.col+"em",height:s.insertTableMaxSize.row+"em"}).mousedown(o.createInvokeHandler("editor.insertTable")).on("mousemove",i.tableMoveHandler)}}).render()});o.memo("button.link",function(){return r.button({contents:r.icon(s.icons.link),tooltip:l.link.link,click:o.createInvokeHandler("linkDialog.show")}).render()});o.memo("button.picture",function(){return r.button({contents:r.icon(s.icons.picture),tooltip:l.image.image,click:o.createInvokeHandler("imageDialog.show")}).render()});o.memo("button.video",function(){return r.button({contents:r.icon(s.icons.video),tooltip:l.video.video,click:o.createInvokeHandler("videoDialog.show")}).render()});o.memo("button.hr",function(){return r.button({contents:r.icon(s.icons.minus),tooltip:l.hr.insert+d("insertHorizontalRule"),click:o.createInvokeHandler("editor.insertHorizontalRule")}).render()});o.memo("button.fullscreen",function(){return r.button({className:"btn-fullscreen",contents:r.icon(s.icons.arrowsAlt),tooltip:l.options.fullscreen,click:o.createInvokeHandler("fullscreen.toggle")}).render()});o.memo("button.codeview",function(){return r.button({className:"btn-codeview",contents:r.icon(s.icons.code),tooltip:l.options.codeview,click:o.createInvokeHandler("codeview.toggle")}).render()});o.memo("button.redo",function(){return r.button({contents:r.icon(s.icons.redo),tooltip:l.history.redo+d("redo"),click:o.createInvokeHandler("editor.redo")}).render()});o.memo("button.undo",function(){return r.button({contents:r.icon(s.icons.undo),tooltip:l.history.undo+d("undo"),click:o.createInvokeHandler("editor.undo")}).render()});o.memo("button.help",function(){return r.button({contents:r.icon(s.icons.question),tooltip:l.options.help,click:o.createInvokeHandler("helpDialog.show")}).render()})};this.addImagePopoverButtons=function(){o.memo("button.imageSize100",function(){return r.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:l.image.resizeFull,click:o.createInvokeHandler("editor.resize","1")}).render()});o.memo("button.imageSize50",function(){return r.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:l.image.resizeHalf,click:o.createInvokeHandler("editor.resize","0.5")}).render()});o.memo("button.imageSize25",function(){return r.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:l.image.resizeQuarter,click:o.createInvokeHandler("editor.resize","0.25")}).render()});o.memo("button.floatLeft",function(){return r.button({contents:r.icon(s.icons.alignLeft),tooltip:l.image.floatLeft,click:o.createInvokeHandler("editor.floatMe","left")}).render()});o.memo("button.floatRight",function(){return r.button({contents:r.icon(s.icons.alignRight),tooltip:l.image.floatRight,click:o.createInvokeHandler("editor.floatMe","right")}).render()});o.memo("button.floatNone",function(){return r.button({contents:r.icon(s.icons.alignJustify),tooltip:l.image.floatNone,click:o.createInvokeHandler("editor.floatMe","none")}).render()});o.memo("button.removeMedia",function(){return r.button({contents:r.icon(s.icons.trash),tooltip:l.image.remove,click:o.createInvokeHandler("editor.removeMedia")}).render()})};this.addLinkPopoverButtons=function(){o.memo("button.linkDialogShow",function(){return r.button({contents:r.icon(s.icons.link),tooltip:l.link.edit,click:o.createInvokeHandler("linkDialog.show")}).render()});o.memo("button.unlink",function(){return r.button({contents:r.icon(s.icons.unlink),tooltip:l.link.unlink,click:o.createInvokeHandler("editor.unlink")}).render()})};this.build=function(e,t){for(var n=0,i=t.length;n<i;n++){var a=t[n];var s=a[0];var l=a[1];var c=r.buttonGroup({className:"note-"+s}).render();for(var d=0,u=l.length;d<u;d++){var f=o.memo("button."+l[d]);if(f){c.append(typeof f==="function"?f(o):f)}}c.appendTo(e)}};this.updateCurrentStyle=function(){var t=o.invoke("editor.currentStyle");this.updateBtnStates({".note-btn-bold":function(){return t["font-bold"]==="bold"},".note-btn-italic":function(){return t["font-italic"]==="italic"},".note-btn-underline":function(){return t["font-underline"]==="underline"},".note-btn-subscript":function(){return t["font-subscript"]==="subscript"},".note-btn-superscript":function(){return t["font-superscript"]==="superscript"},".note-btn-strikethrough":function(){return t["font-strikethrough"]==="strikethrough"}});if(t["font-family"]){var r=t["font-family"].split(",").map(function(e){return e.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")});var s=n.find(r,i.isFontInstalled);a.find(".dropdown-fontname li a").each(function(){var t=e(this).data("value")+""===s+"";this.className=t?"checked":""});a.find(".note-current-fontname").text(s)}if(t["font-size"]){var l=t["font-size"];a.find(".dropdown-fontsize li a").each(function(){var t=e(this).data("value")+""===l+"";this.className=t?"checked":""});a.find(".note-current-fontsize").text(l)}if(t["line-height"]){var c=t["line-height"];a.find(".dropdown-line-height li a").each(function(){var t=e(this).data("value")+""===c+"";this.className=t?"checked":""})}};this.updateBtnStates=function(t){e.each(t,function(e,t){r.toggleBtnActive(a.find(e),t())})};this.tableMoveHandler=function(t){var n=18;var o=e(t.target.parentNode);var i=o.next();var r=o.find(".note-dimension-picker-mousecatcher");var a=o.find(".note-dimension-picker-highlighted");var l=o.find(".note-dimension-picker-unhighlighted");var c;if(t.offsetX===undefined){var d=e(t.target).offset();c={x:t.pageX-d.left,y:t.pageY-d.top}}else{c={x:t.offsetX,y:t.offsetY}}var u={c:Math.ceil(c.x/n)||1,r:Math.ceil(c.y/n)||1};a.css({width:u.c+"em",height:u.r+"em"});r.data("value",u.c+"x"+u.r);if(3<u.c&&u.c<s.insertTableMaxSize.col){l.css({width:u.c+1+"em"})}if(3<u.r&&u.r<s.insertTableMaxSize.row){l.css({height:u.r+1+"em"})}i.html(u.c+" x "+u.r)}};var oe=function(t){var n=e.summernote.ui;var o=t.layoutInfo.note;var i=t.layoutInfo.toolbar;var r=t.options;this.shouldInitialize=function(){return!r.airMode};this.initialize=function(){r.toolbar=r.toolbar||[];if(!r.toolbar.length){i.hide()}else{t.invoke("buttons.build",i,r.toolbar)}if(r.toolbarContainer){i.appendTo(r.toolbarContainer)}o.on("summernote.keyup summernote.mouseup summernote.change",function(){t.invoke("buttons.updateCurrentStyle")});t.invoke("buttons.updateCurrentStyle")};this.destroy=function(){i.children().remove()};this.updateFullscreen=function(e){n.toggleBtnActive(i.find(".btn-fullscreen"),e)};this.updateCodeview=function(e){n.toggleBtnActive(i.find(".btn-codeview"),e);if(e){this.deactivate()}else{this.activate()}};this.activate=function(e){var t=i.find("button");if(!e){t=t.not(".btn-codeview")}n.toggleBtn(t,true)};this.deactivate=function(e){var t=i.find("button");if(!e){t=t.not(".btn-codeview")}n.toggleBtn(t,false)}};var ie=function(t){var n=this;var o=e.summernote.ui;var i=t.layoutInfo.editor;var r=t.options;var a=r.langInfo;this.initialize=function(){var t=r.dialogsInBody?e(document.body):i;var n='<div class="form-group">'+"<label>"+a.link.textToDisplay+"</label>"+'<input class="note-link-text form-control" type="text" />'+"</div>"+'<div class="form-group">'+"<label>"+a.link.url+"</label>"+'<input class="note-link-url form-control" type="text" value="http://" />'+"</div>"+(!r.disableLinkTarget?'<div class="checkbox">'+"<label>"+'<input type="checkbox" checked> '+a.link.openInNewWindow+"</label>"+"</div>":"");var s='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+a.link.insert+"</button>";this.$dialog=o.dialog({className:"link-dialog",title:a.link.insert,fade:r.dialogsFade,body:n,footer:s}).render().appendTo(t)};this.destroy=function(){o.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(e,t){e.on("keypress",function(e){if(e.keyCode===D.code.ENTER){t.trigger("click")}})};this.showLinkDialog=function(i){return e.Deferred(function(e){var r=n.$dialog.find(".note-link-text"),a=n.$dialog.find(".note-link-url"),s=n.$dialog.find(".note-link-btn"),l=n.$dialog.find("input[type=checkbox]");o.onDialogShown(n.$dialog,function(){t.triggerEvent("dialog.shown");r.val(i.text);r.on("input",function(){o.toggleBtn(s,r.val()&&a.val());i.text=r.val()});if(!i.url){i.url=i.text||"http://";o.toggleBtn(s,i.text)}a.on("input",function(){o.toggleBtn(s,r.val()&&a.val());if(!i.text){r.val(a.val())}}).val(i.url).trigger("focus");n.bindEnterKey(a,s);n.bindEnterKey(r,s);l.prop("checked",i.isNewWindow);s.one("click",function(t){t.preventDefault();e.resolve({range:i.range,url:a.val(),text:r.val(),isNewWindow:l.is(":checked")});n.$dialog.modal("hide")})});o.onDialogHidden(n.$dialog,function(){r.off("input keypress");a.off("input keypress");s.off("click");if(e.state()==="pending"){e.reject()}});o.showDialog(n.$dialog)}).promise()};this.show=function(){var e=t.invoke("editor.getLinkInfo");t.invoke("editor.saveRange");this.showLinkDialog(e).then(function(e){t.invoke("editor.restoreRange");t.invoke("editor.createLink",e)}).fail(function(){t.invoke("editor.restoreRange")})};t.memo("help.linkDialog.show",r.langInfo.help["linkDialog.show"])};var re=function(t){var o=this;var i=e.summernote.ui;var r=t.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){o.update()},"summernote.dialog.shown":function(){o.hide()}};this.shouldInitialize=function(){return!n.isEmpty(r.popover.link)};this.initialize=function(){this.$popover=i.popover({className:"note-link-popover",callback:function(e){var t=e.find(".popover-content");t.prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo("body");var e=this.$popover.find(".popover-content");t.invoke("buttons.build",e,r.popover.link)};this.destroy=function(){this.$popover.remove()};this.update=function(){if(!t.invoke("editor.hasFocus")){this.hide();return}var n=t.invoke("editor.createRange");if(n.isCollapsed()&&n.isOnAnchor()){var o=v.ancestor(n.sc,v.isAnchor);var i=e(o).attr("href");this.$popover.find("a").attr("href",i).html(i);var r=v.posFromPlaceholder(o);this.$popover.css({display:"block",left:r.left,top:r.top})}else{this.hide()}};this.hide=function(){this.$popover.hide()}};var ae=function(t){var n=this;var o=e.summernote.ui;var i=t.layoutInfo.editor;var r=t.options;var a=r.langInfo;this.initialize=function(){var t=r.dialogsInBody?e(document.body):i;var n="";if(r.maximumImageFileSize){var s=Math.floor(Math.log(r.maximumImageFileSize)/Math.log(1024));var l=(r.maximumImageFileSize/Math.pow(1024,s)).toFixed(2)*1+" "+" KMGTP"[s]+"B";n="<small>"+a.image.maximumFileSize+" : "+l+"</small>"}var c='<div class="form-group note-group-select-from-files">'+"<label>"+a.image.selectFromFiles+"</label>"+'<input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+n+"</div>"+'<div class="form-group" style="overflow:auto;">'+"<label>"+a.image.url+"</label>"+'<input class="note-image-url form-control col-md-12" type="text" />'+"</div>";var d='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+a.image.insert+"</button>";this.$dialog=o.dialog({title:a.image.insert,fade:r.dialogsFade,body:c,footer:d}).render().appendTo(t)};this.destroy=function(){o.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(e,t){e.on("keypress",function(e){if(e.keyCode===D.code.ENTER){t.trigger("click")}})};this.show=function(){t.invoke("editor.saveRange");this.showImageDialog().then(function(e){o.hideDialog(n.$dialog);t.invoke("editor.restoreRange");if(typeof e==="string"){t.invoke("editor.insertImage",e)}else{t.invoke("editor.insertImagesOrCallback",e)}}).fail(function(){t.invoke("editor.restoreRange")})};this.showImageDialog=function(){return e.Deferred(function(e){var i=n.$dialog.find(".note-image-input"),r=n.$dialog.find(".note-image-url"),a=n.$dialog.find(".note-image-btn");o.onDialogShown(n.$dialog,function(){t.triggerEvent("dialog.shown");i.replaceWith(i.clone().on("change",function(){e.resolve(this.files||this.value)}).val(""));a.click(function(t){t.preventDefault();e.resolve(r.val())});r.on("keyup paste",function(){var e=r.val();o.toggleBtn(a,e)}).val("").trigger("focus");n.bindEnterKey(r,a)});o.onDialogHidden(n.$dialog,function(){i.off("change");r.off("keyup paste keypress");a.off("click");if(e.state()==="pending"){e.reject()}});o.showDialog(n.$dialog)})}};var se=function(t){var o=e.summernote.ui;var i=t.options;this.shouldInitialize=function(){return!n.isEmpty(i.popover.image)};this.initialize=function(){this.$popover=o.popover({className:"note-image-popover"}).render().appendTo("body");var e=this.$popover.find(".popover-content");t.invoke("buttons.build",e,i.popover.image)};this.destroy=function(){this.$popover.remove()};this.update=function(e){if(v.isImg(e)){var t=v.posFromPlaceholder(e);this.$popover.css({display:"block",left:t.left,top:t.top})}else{this.hide()}};this.hide=function(){this.$popover.hide()}};var le=function(t){var n=this;var o=e.summernote.ui;var i=t.layoutInfo.editor;var r=t.options;var a=r.langInfo;this.initialize=function(){var t=r.dialogsInBody?e(document.body):i;var n='<div class="form-group row-fluid">'+"<label>"+a.video.url+' <small class="text-muted">'+a.video.providers+"</small></label>"+'<input class="note-video-url form-control span12" type="text" />'+"</div>";var s='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+a.video.insert+"</button>";this.$dialog=o.dialog({title:a.video.insert,fade:r.dialogsFade,body:n,footer:s}).render().appendTo(t)};this.destroy=function(){o.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(e,t){e.on("keypress",function(e){if(e.keyCode===D.code.ENTER){t.trigger("click")}})};this.createVideoNode=function(t){var n=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;var o=t.match(n);var i=/\/\/instagram.com\/p\/(.[a-zA-Z0-9_-]*)/;var r=t.match(i);var a=/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/;var s=t.match(a);var l=/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/;var c=t.match(l);var d=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/;var u=t.match(d);var f=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/;var h=t.match(f);var v=/^.+.(mp4|m4v)$/;var m=t.match(v);var p=/^.+.(ogg|ogv)$/;var g=t.match(p);var b=/^.+.(webm)$/;var k=t.match(b);var y;if(o&&o[1].length===11){var C=o[1];y=e("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+C).attr("width","640").attr("height","360")}else if(r&&r[0].length){y=e("<iframe>").attr("frameborder",0).attr("src",r[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true")}else if(s&&s[0].length){y=e("<iframe>").attr("frameborder",0).attr("src",s[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed")}else if(c&&c[3].length){y=e("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+c[3]).attr("width","640").attr("height","360")}else if(u&&u[2].length){y=e("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+u[2]).attr("width","640").attr("height","360")}else if(h&&h[1].length){y=e("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+h[1])}else if(m||g||k){y=e("<video controls>").attr("src",t).attr("width","640").attr("height","360")}else{return false}y.addClass("note-video-clip");return y[0]};this.show=function(){var e=t.invoke("editor.getSelectedText");t.invoke("editor.saveRange");this.showVideoDialog(e).then(function(e){o.hideDialog(n.$dialog);t.invoke("editor.restoreRange");var i=n.createVideoNode(e);if(i){t.invoke("editor.insertNode",i)}}).fail(function(){t.invoke("editor.restoreRange")})};this.showVideoDialog=function(i){return e.Deferred(function(e){var r=n.$dialog.find(".note-video-url"),a=n.$dialog.find(".note-video-btn");o.onDialogShown(n.$dialog,function(){t.triggerEvent("dialog.shown");r.val(i).on("input",function(){o.toggleBtn(a,r.val())}).trigger("focus");a.click(function(t){t.preventDefault();e.resolve(r.val())});n.bindEnterKey(r,a)});o.onDialogHidden(n.$dialog,function(){r.off("input");a.off("click");if(e.state()==="pending"){e.reject()}});o.showDialog(n.$dialog)})}};var ce=function(t){var n=this;var o=e.summernote.ui;var i=t.layoutInfo.editor;var r=t.options;var a=r.langInfo;this.createShortCutList=function(){var n=r.keyMap[u.isMac?"mac":"pc"];return Object.keys(n).map(function(o){var i=n[o];var r=e('<div><div class="help-list-item"/></div>');r.append(e("<label><kbd>"+o+"</kdb></label>").css({width:180,"margin-right":10})).append(e("<span/>").html(t.memo("help."+i)||i));return r.html()}).join("")};this.initialize=function(){var t=r.dialogsInBody?e(document.body):i;var n=['<p class="text-center">','<a href="//summernote.org/" target="_blank">Summernote 0.8.1</a> · ','<a href="//github.com/summernote/summernote" target="_blank">Project</a> · ','<a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=o.dialog({title:a.options.help,fade:r.dialogsFade,body:this.createShortCutList(),footer:n,callback:function(e){e.find(".modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(t)};this.destroy=function(){o.hideDialog(this.$dialog);this.$dialog.remove()};this.showHelpDialog=function(){return e.Deferred(function(e){o.onDialogShown(n.$dialog,function(){t.triggerEvent("dialog.shown");e.resolve()});o.showDialog(n.$dialog)}).promise()};this.show=function(){t.invoke("editor.saveRange");this.showHelpDialog().then(function(){t.invoke("editor.restoreRange")})}};var de=function(o){var i=this;var r=e.summernote.ui;var a=o.options;var s=20;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){i.update()},"summernote.change summernote.dialog.shown":function(){i.hide()},"summernote.focusout":function(e,n){if(u.isFF){return}if(!n.relatedTarget||!v.ancestor(n.relatedTarget,t.eq(i.$popover[0]))){i.hide()}}};this.shouldInitialize=function(){return a.airMode&&!n.isEmpty(a.popover.air)};this.initialize=function(){this.$popover=r.popover({className:"note-air-popover"}).render().appendTo("body");var e=this.$popover.find(".popover-content");o.invoke("buttons.build",e,a.popover.air)};this.destroy=function(){this.$popover.remove()};this.update=function(){var e=o.invoke("editor.currentStyle");if(e.range&&!e.range.isCollapsed()){var i=n.last(e.range.getClientRects());if(i){var r=t.rect2bnd(i);this.$popover.css({display:"block",left:Math.max(r.left+r.width/2,0)-s,top:r.top+r.height})}}else{this.hide()}};this.hide=function(){this.$popover.hide()}};var ue=function(o){var i=this;var r=e.summernote.ui;var a=5;var s=o.options.hint||[];var l=o.options.hintDirection||"bottom";var c=e.isArray(s)?s:[s];this.events={"summernote.keyup":function(e,t){if(!t.isDefaultPrevented()){i.handleKeyup(t)}},"summernote.keydown":function(e,t){i.handleKeydown(t)},"summernote.dialog.shown":function(){i.hide()}};this.shouldInitialize=function(){return c.length>0};this.initialize=function(){this.lastWordRange=null;this.$popover=r.popover({className:"note-hint-popover",hideArrow:true,direction:""}).render().appendTo("body");this.$popover.hide();this.$content=this.$popover.find(".popover-content");this.$content.on("click",".note-hint-item",function(){i.$content.find(".active").removeClass("active");e(this).addClass("active");i.replace()})};this.destroy=function(){this.$popover.remove()};this.selectItem=function(e){this.$content.find(".active").removeClass("active");e.addClass("active");this.$content[0].scrollTop=e[0].offsetTop-this.$content.innerHeight()/2};this.moveDown=function(){var e=this.$content.find(".note-hint-item.active");var t=e.next();if(t.length){this.selectItem(t)}else{var n=e.parent().next();if(!n.length){n=this.$content.find(".note-hint-group").first()}this.selectItem(n.find(".note-hint-item").first())}};this.moveUp=function(){var e=this.$content.find(".note-hint-item.active");var t=e.prev();if(t.length){this.selectItem(t)}else{var n=e.parent().prev();if(!n.length){n=this.$content.find(".note-hint-group").last()}this.selectItem(n.find(".note-hint-item").last())}};this.replace=function(){var e=this.$content.find(".note-hint-item.active");if(e.length){var t=this.nodeFromItem(e);this.lastWordRange.insertNode(t);M.createFromNode(t).collapse().select();this.lastWordRange=null;this.hide();o.invoke("editor.focus")}};this.nodeFromItem=function(e){var t=c[e.data("index")];var n=e.data("item");var o=t.content?t.content(n):n;if(typeof o==="string"){o=v.createText(o)}return o};this.createItemTemplates=function(t,n){var o=c[t];return n.map(function(n,i){var r=e('<div class="note-hint-item"/>');r.append(o.template?o.template(n):n+"");r.data({index:t,item:n});if(t===0&&i===0){r.addClass("active")}return r})};this.handleKeydown=function(e){if(!this.$popover.is(":visible")){return}if(e.keyCode===D.code.ENTER){e.preventDefault();this.replace()}else if(e.keyCode===D.code.UP){e.preventDefault();this.moveUp()}else if(e.keyCode===D.code.DOWN){e.preventDefault();this.moveDown()}};this.searchKeyword=function(e,t,n){var o=c[e];if(o&&o.match.test(t)&&o.search){var i=o.match.exec(t);o.search(i[1],n)}else{n()}};this.createGroup=function(t,n){var o=e('<div class="note-hint-group note-hint-group-'+t+'"/>');this.searchKeyword(t,n,function(e){e=e||[];if(e.length){o.html(i.createItemTemplates(t,e));i.show()}});return o};this.handleKeyup=function(e){if(n.contains([D.code.ENTER,D.code.UP,D.code.DOWN],e.keyCode)){if(e.keyCode===D.code.ENTER){if(this.$popover.is(":visible")){return}}}else{var r=o.invoke("editor.createRange").getWordRange();var s=r.toString();if(c.length&&s){this.$content.empty();var d=t.rect2bnd(n.last(r.getClientRects()));if(d){this.$popover.hide();this.lastWordRange=r;c.forEach(function(e,t){if(e.match.test(s)){i.createGroup(t,s).appendTo(i.$content)}});if(l==="top"){this.$popover.css({left:d.left,top:d.top-this.$popover.outerHeight()-a})}else{this.$popover.css({left:d.left,top:d.top+d.height+a})}}}else{this.hide()}}};this.show=function(){this.$popover.show()};this.hide=function(){this.$popover.hide()}};e.summernote=e.extend(e.summernote,{version:"0.8.1",ui:A,plugins:{},options:{modules:{editor:V,clipboard:W,dropzone:q,codeview:G,statusbar:Z,fullscreen:J,handle:Q,hintPopover:ue,autoLink:X,autoSync:ee,placeholder:te,buttons:ne,toolbar:oe,linkDialog:ie,linkPopover:re,imageDialog:ae,imagePopover:se,videoDialog:le,helpDialog:ce,airPopover:de},buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:false,width:null,height:null,focus:false,tabSize:4,styleWithSpan:true,shortcuts:true,textareaAutoSync:true,direction:null,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:false,dialogsFade:false,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onSubmit:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:true,lineNumbers:true},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})});