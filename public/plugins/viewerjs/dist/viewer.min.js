(function(e,t){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=e.document?t(e,true):function(e){if(!e.document){throw new Error("Viewer requires a window with a document")}return t(e)}}else{t(e)}})(typeof window!=="undefined"?window:this,function(e,t){"use strict";var i=e.document;var r=e.Event;var a="viewer";var n=a+"-fixed";var o=a+"-open";var s=a+"-show";var l=a+"-hide";var u="viewer-hide-xs-down";var f="viewer-hide-sm-down";var v="viewer-hide-md-down";var c=a+"-fade";var d=a+"-in";var m=a+"-move";var h=a+"-active";var g=a+"-invisible";var w=a+"-transition";var p=a+"-fullscreen";var b=a+"-fullscreen-exit";var y=a+"-close";var x="mousedown touchstart pointerdown MSPointerDown";var z="mousemove touchmove pointermove MSPointerMove";var E="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel";var D="wheel mousewheel DOMMouseScroll";var k="transitionend";var I="load";var L="keydown";var Y="click";var T="resize";var F="ready";var X="show";var S="shown";var V="hide";var N="hidden";var C="view";var P="viewed";var A=/^(width|height|left|top|marginLeft|marginTop)$/;var R=/([a-z\d])([A-Z])/g;var W=/^\s+(.*)\s+$/;var _=/\s+/;var q=typeof i.createElement(a).style.transition!=="undefined";var M=Math.min;var B=Math.max;var O=Math.abs;var H=Math.sqrt;var j=Math.round;var U=Object.prototype;var Z=U.toString;var $=U.hasOwnProperty;var K=Array.prototype.slice;function G(e){return Z.call(e).slice(8,-1).toLowerCase()}function J(e){return typeof e==="string"}function Q(e){return typeof e==="number"&&!isNaN(e)}function ee(e){return typeof e==="undefined"}function te(e){return typeof e==="object"&&e!==null}function ie(e){var t;var i;if(!te(e)){return false}try{t=e.constructor;i=t.prototype;return t&&i&&$.call(i,"isPrototypeOf")}catch(e){return false}}function re(e){return G(e)==="function"}function ae(e){return Array.isArray?Array.isArray(e):G(e)==="array"}function ne(e,t){t=t>=0?t:0;if(Array.from){return Array.from(e).slice(t)}return K.call(e,t)}function oe(e,t){var i=-1;if(t.indexOf){return t.indexOf(e)}else{le(t,function(t,r){if(t===e){i=r;return false}})}return i}function se(e){if(J(e)){e=e.trim?e.trim():e.replace(W,"1")}return e}function le(e,t){var i;var r;if(e&&re(t)){if(ae(e)||Q(e.length)){for(r=0,i=e.length;r<i;r++){if(t.call(e,e[r],r,e)===false){break}}}else if(te(e)){for(r in e){if(e.hasOwnProperty(r)){if(t.call(e,e[r],r,e)===false){break}}}}}return e}function ue(e){var t;if(arguments.length>1){t=ne(arguments);if(Object.assign){return Object.assign.apply(Object,t)}t.shift();le(t,function(t){le(t,function(t,i){e[i]=t})})}return e}function fe(e,t){var i=ne(arguments,2);return function(){return e.apply(t,i.concat(ne(arguments)))}}function ve(e,t){var i=e.style;le(t,function(e,t){if(A.test(t)&&Q(e)){e+="px"}i[t]=e})}function ce(t){return e.getComputedStyle?e.getComputedStyle(t,null):t.currentStyle}function de(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function me(e,t){var i;if(!t){return}if(Q(e.length)){return le(e,function(e){me(e,t)})}if(e.classList){return e.classList.add(t)}i=se(e.className);if(!i){e.className=t}else if(i.indexOf(t)<0){e.className=i+" "+t}}function he(e,t){if(!t){return}if(Q(e.length)){return le(e,function(e){he(e,t)})}if(e.classList){return e.classList.remove(t)}if(e.className.indexOf(t)>=0){e.className=e.className.replace(t,"")}}function ge(e,t,i){if(Q(e.length)){return le(e,function(e){ge(e,t,i)})}if(i){me(e,t)}else{he(e,t)}}function we(e){return e.replace(R,"$1-$2").toLowerCase()}function pe(e,t){if(te(e[t])){return e[t]}else if(e.dataset){return e.dataset[t]}return e.getAttribute("data-"+we(t))}function be(e,t,i){if(te(i)){e[t]=i}else if(e.dataset){e.dataset[t]=i}else{e.setAttribute("data-"+we(t),i)}}function ye(e,t){if(te(e[t])){delete e[t]}else if(e.dataset){delete e.dataset[t]}else{e.removeAttribute("data-"+we(t))}}function xe(e,t,i,r){var a=se(t).split(_);var n=i;if(a.length>1){return le(a,function(t){xe(e,t,i)})}if(r){i=function(){ze(e,t,i);return n.apply(e,arguments)}}if(e.addEventListener){e.addEventListener(t,i,false)}else if(e.attachEvent){e.attachEvent("on"+t,i)}}function ze(e,t,i){var r=se(t).split(_);if(r.length>1){return le(r,function(t){ze(e,t,i)})}if(e.removeEventListener){e.removeEventListener(t,i,false)}else if(e.detachEvent){e.detachEvent("on"+t,i)}}function Ee(e,t,a){var n;if(e.dispatchEvent){if(re(r)&&re(CustomEvent)){if(ee(a)){n=new r(t,{bubbles:true,cancelable:true})}else{n=new CustomEvent(t,{detail:a,bubbles:true,cancelable:true})}}else{if(ee(a)){n=i.createEvent("Event");n.initEvent(t,true,true)}else{n=i.createEvent("CustomEvent");n.initCustomEvent(t,true,true,a)}}return e.dispatchEvent(n)}else if(e.fireEvent){return e.fireEvent("on"+t)}}function De(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}}function ke(t){var r=t||e.event;var a;if(!r.target){r.target=r.srcElement||i}if(!Q(r.pageX)){a=i.documentElement;r.pageX=r.clientX+(e.scrollX||a&&a.scrollLeft||0)-(a&&a.clientLeft||0);r.pageY=r.clientY+(e.scrollY||a&&a.scrollTop||0)-(a&&a.clientTop||0)}return r}function Ie(t){var r=i.documentElement;var a=t.getBoundingClientRect();return{left:a.left+(e.scrollX||r&&r.scrollLeft||0)-(r&&r.clientLeft||0),top:a.top+(e.scrollY||r&&r.scrollTop||0)-(r&&r.clientTop||0)}}function Le(e){var t=e.length;var i=0;var r=0;if(t){le(e,function(e){i+=e.pageX;r+=e.pageY});i/=t;r/=t}return{pageX:i,pageY:r}}function Ye(e,t){return e.getElementsByTagName(t)}function Te(e,t){return e.getElementsByClassName?e.getElementsByClassName(t):e.querySelectorAll("."+t)}function Fe(e,t){if(t.length){return le(t,function(t){Fe(e,t)})}e.appendChild(t)}function Xe(e){if(e.parentNode){e.parentNode.removeChild(e)}}function Se(e){while(e.firstChild){e.removeChild(e.firstChild)}}function Ve(e,t){if(!ee(e.textContent)){e.textContent=t}else{e.innerText=t}}function Ne(e){return e.offsetWidth}function Ce(e){return J(e)?e.replace(/^.*\//,"").replace(/[\?&#].*$/,""):""}function Pe(e,t){var r;if(e.naturalWidth){return t(e.naturalWidth,e.naturalHeight)}r=i.createElement("img");r.onload=function(){t(this.width,this.height)};r.src=e.src}function Ae(e){var t=[];var i=e.rotate;var r=e.scaleX;var a=e.scaleY;if(Q(i)){t.push("rotate("+i+"deg)")}if(Q(r)){t.push("scaleX("+r+")")}if(Q(a)){t.push("scaleY("+a+")")}return t.length?t.join(" "):"none"}function Re(e){switch(e){case 2:return u;case 3:return f;case 4:return v}}function We(e,t){var i=this;i.element=e;i.options=ue({},We.DEFAULTS,ie(t)&&t);i.isImg=false;i.isBuilt=false;i.isShown=false;i.isViewed=false;i.isFulled=false;i.isPlayed=false;i.wheeling=false;i.playing=false;i.fading=false;i.tooltiping=false;i.transitioning=false;i.action=false;i.target=false;i.timeout=false;i.index=0;i.length=0;i.init()}We.prototype={constructor:We,init:function(){var t=this;var r=t.options;var n=t.element;var o=n.tagName.toLowerCase()==="img";var s=o?[n]:Ye(n,"img");var l=s.length;var u=fe(t.ready,t);if(pe(n,a)){return}be(n,a,t);if(!l){return}if(re(r.ready)){xe(n,F,r.ready,true)}if(!q){r.transition=false}t.isImg=o;t.length=l;t.count=0;t.images=s;t.body=i.body;t.scrollbarWidth=e.innerWidth-i.body.clientWidth;if(r.inline){xe(n,F,function(){t.view()},true);le(s,function(e){if(e.complete){u()}else{xe(e,I,u,true)}})}else{xe(n,Y,t._start=fe(t.start,t))}},ready:function(){var e=this;e.count++;if(e.count===e.length){e.build()}},build:function(){var e=this;var t=e.options;var r=e.element;var a;var o;var s;var u;var f;var v;var d;var m;if(e.isBuilt){return}a=i.createElement("div");a.innerHTML=We.TEMPLATE;e.parent=o=r.parentNode;e.viewer=s=Te(a,"viewer-container")[0];e.canvas=Te(s,"viewer-canvas")[0];e.footer=Te(s,"viewer-footer")[0];e.title=d=Te(s,"viewer-title")[0];e.toolbar=f=Te(s,"viewer-toolbar")[0];e.navbar=v=Te(s,"viewer-navbar")[0];e.button=u=Te(s,"viewer-button")[0];e.tooltipBox=Te(s,"viewer-tooltip")[0];e.player=Te(s,"viewer-player")[0];e.list=Te(s,"viewer-list")[0];me(d,!t.title?l:Re(t.title));me(f,!t.toolbar?l:Re(t.toolbar));me(v,!t.navbar?l:Re(t.navbar));ge(u,l,!t.button);ge(f.querySelector(".viewer-one-to-one"),g,!t.zoomable);ge(f.querySelectorAll('li[class*="zoom"]'),g,!t.zoomable);ge(f.querySelectorAll('li[class*="flip"]'),g,!t.scalable);if(!t.rotatable){m=f.querySelectorAll('li[class*="rotate"]');me(m,g);Fe(f,m)}if(t.inline){me(u,p);ve(s,{zIndex:t.zIndexInline});if(ce(o).position==="static"){ve(o,{position:"relative"})}}else{me(u,y);me(s,n);me(s,c);me(s,l);ve(s,{zIndex:t.zIndex})}o.insertBefore(s,r.nextSibling);if(t.inline){e.render();e.bind();e.isShown=true}e.isBuilt=true;Ee(r,F)},unbuild:function(){var e=this;if(!e.isBuilt){return}e.isBuilt=false;Xe(e.viewer)},bind:function(){var t=this;var r=t.options;var a=t.element;var n=t.viewer;if(re(r.view)){xe(a,C,r.view)}if(re(r.viewed)){xe(a,P,r.viewed)}xe(n,Y,t._click=fe(t.click,t));xe(n,D,t._wheel=fe(t.wheel,t));xe(t.canvas,x,t._mousedown=fe(t.mousedown,t));xe(i,z,t._mousemove=fe(t.mousemove,t));xe(i,E,t._mouseup=fe(t.mouseup,t));xe(i,L,t._keydown=fe(t.keydown,t));xe(e,T,t._resize=fe(t.resize,t))},unbind:function(){var t=this;var r=t.options;var a=t.element;var n=t.viewer;if(re(r.view)){ze(a,C,r.view)}if(re(r.viewed)){ze(a,P,r.viewed)}ze(n,Y,t._click);ze(n,D,t._wheel);ze(t.canvas,x,t._mousedown);ze(i,z,t._mousemove);ze(i,E,t._mouseup);ze(i,L,t._keydown);ze(e,T,t._resize)},render:function(){var e=this;e.initContainer();e.initViewer();e.initList();e.renderViewer()},initContainer:function(){var t=this;t.containerData={width:e.innerWidth,height:e.innerHeight}},initViewer:function(){var e=this;var t=e.options;var i=e.parent;var r;if(t.inline){e.parentData=r={width:B(i.offsetWidth,t.minWidth),height:B(i.offsetHeight,t.minHeight)}}if(e.isFulled||!r){r=e.containerData}e.viewerData=ue({},r)},renderViewer:function(){var e=this;if(e.options.inline&&!e.isFulled){ve(e.viewer,e.viewerData)}},initList:function(){var e=this;var t=e.options;var i=e.element;var r=e.list;var a=[];le(e.images,function(e,i){var r=e.src;var n=e.alt||Ce(r);var o=t.url;if(!r){return}if(J(o)){o=e.getAttribute(o)}else if(re(o)){o=o.call(e,e)}a.push("<li>"+"<img"+' src="'+r+'"'+' data-action="view"'+' data-index="'+i+'"'+' data-original-url="'+(o||r)+'"'+' alt="'+n+'"'+">"+"</li>")});r.innerHTML=a.join("");le(Ye(r,"img"),function(t){be(t,"filled",true);xe(t,I,fe(e.loadImage,e),true)});e.items=Ye(r,"li");if(t.transition){xe(i,P,function(){me(r,w)},true)}},renderList:function(e){var t=this;var i=e||t.index;var r=t.items[i].offsetWidth||30;var a=r+1;ve(t.list,{width:a*t.length,marginLeft:(t.viewerData.width-r)/2-a*i})},resetList:function(){var e=this;Se(e.list);he(e.list,w);ve({marginLeft:0})},initImage:function(e){var t=this;var i=t.options;var r=t.image;var a=t.viewerData;var n=t.footer.offsetHeight;var o=a.width;var s=B(a.height-n,n);var l=t.imageData||{};Pe(r,function(r,a){var n=r/a;var u=o;var f=s;var v;var c;if(s*n>o){f=o/n}else{u=s*n}u=M(u*.9,r);f=M(f*.9,a);c={naturalWidth:r,naturalHeight:a,aspectRatio:n,ratio:u/r,width:u,height:f,left:(o-u)/2,top:(s-f)/2};v=ue({},c);if(i.rotatable){c.rotate=l.rotate||0;v.rotate=0}if(i.scalable){c.scaleX=l.scaleX||1;c.scaleY=l.scaleY||1;v.scaleX=1;v.scaleY=1}t.imageData=c;t.initialImageData=v;if(re(e)){e()}})},renderImage:function(e){var t=this;var i=t.image;var r=t.imageData;var a=Ae(r);ve(i,{width:r.width,height:r.height,marginLeft:r.left,marginTop:r.top,WebkitTransform:a,msTransform:a,transform:a});if(re(e)){if(t.transitioning){xe(i,k,e,true)}else{e()}}},resetImage:function(){var e=this;if(e.image){Xe(e.image);e.image=null}},start:function(e){var t=this;var i=ke(e);var r=i.target;if(r.tagName.toLowerCase()==="img"){t.target=r;t.show()}},click:function(e){var t=this;var i=ke(e);var r=i.target;var a=pe(r,"action");var n=t.imageData;switch(a){case"mix":if(t.isPlayed){t.stop()}else{if(t.options.inline){if(t.isFulled){t.exit()}else{t.full()}}else{t.hide()}}break;case"view":t.view(pe(r,"index"));break;case"zoom-in":t.zoom(.1,true);break;case"zoom-out":t.zoom(-.1,true);break;case"one-to-one":t.toggle();break;case"reset":t.reset();break;case"prev":t.prev();break;case"play":t.play();break;case"next":t.next();break;case"rotate-left":t.rotate(-90);break;case"rotate-right":t.rotate(90);break;case"flip-horizontal":t.scaleX(-n.scaleX||-1);break;case"flip-vertical":t.scaleY(-n.scaleY||-1);break;default:if(t.isPlayed){t.stop()}}},load:function(){var e=this;var t=e.options;var i=e.image;var r=e.index;var a=e.viewerData;if(e.timeout){clearTimeout(e.timeout);e.timeout=false}he(i,g);i.style.cssText="width:0;"+"height:0;"+"margin-left:"+a.width/2+"px;"+"margin-top:"+a.height/2+"px;"+"max-width:none!important;"+"visibility:visible;";e.initImage(function(){ge(i,w,t.transition);ge(i,m,t.movable);e.renderImage(function(){e.isViewed=true;Ee(e.element,P,{originalImage:e.images[r],index:r,image:i})})})},loadImage:function(e){var t=ke(e);var i=t.target;var r=i.parentNode;var a=r.offsetWidth||30;var n=r.offsetHeight||50;var o=!!pe(i,"filled");Pe(i,function(e,t){var r=e/t;var s=a;var l=n;if(n*r>a){if(o){s=n*r}else{l=a/r}}else{if(o){l=a/r}else{s=n*r}}ve(i,{width:s,height:l,marginLeft:(a-s)/2,marginTop:(n-l)/2})})},resize:function(){var e=this;e.initContainer();e.initViewer();e.renderViewer();e.renderList();if(e.isViewed){e.initImage(function(){e.renderImage()})}if(e.isPlayed){le(Ye(e.player,"img"),function(t){xe(t,I,fe(e.loadImage,e),true);Ee(t,I)})}},wheel:function(e){var t=this;var i=ke(e);var r=Number(t.options.zoomRatio)||.1;var a=1;if(!t.isViewed){return}De(i);if(t.wheeling){return}t.wheeling=true;setTimeout(function(){t.wheeling=false},50);if(i.deltaY){a=i.deltaY>0?1:-1}else if(i.wheelDelta){a=-i.wheelDelta/120}else if(i.detail){a=i.detail>0?1:-1}t.zoom(-a*r,true,i)},keydown:function(e){var t=this;var i=ke(e);var r=t.options;var a=i.keyCode||i.which||i.charCode;if(!t.isFulled||!r.keyboard){return}switch(a){case 27:if(t.isPlayed){t.stop()}else{if(r.inline){if(t.isFulled){t.exit()}}else{t.hide()}}break;case 32:if(t.isPlayed){t.stop()}break;case 37:t.prev();break;case 38:De(i);t.zoom(r.zoomRatio,true);break;case 39:t.next();break;case 40:De(i);t.zoom(-r.zoomRatio,true);break;case 48:case 49:if(i.ctrlKey||i.shiftKey){De(i);t.toggle()}break}},mousedown:function(e){var t=this;var i=t.options;var r=ke(e);var a=i.movable?"move":false;var n=r.touches;var o;var s;if(!t.isViewed){return}if(n){o=n.length;if(o>1){if(i.zoomable&&o===2){s=n[1];t.startX2=s.pageX;t.startY2=s.pageY;a="zoom"}else{return}}else{if(t.isSwitchable()){a="switch"}}s=n[0]}if(a){De(r);t.action=a;t.startX=s?s.pageX:r.pageX;t.startY=s?s.pageY:r.pageY}},mousemove:function(e){var t=this;var i=t.options;var r=ke(e);var a=t.action;var n=t.image;var o=r.touches;var s;var l;if(!t.isViewed){return}if(o){s=o.length;if(s>1){if(i.zoomable&&s===2){l=o[1];t.endX2=l.pageX;t.endY2=l.pageY}else{return}}l=o[0]}if(a){De(r);if(a==="move"&&i.transition&&de(n,w)){he(n,w)}t.endX=l?l.pageX:r.pageX;t.endY=l?l.pageY:r.pageY;t.change(r)}},mouseup:function(e){var t=this;var i=ke(e);var r=t.action;if(r){De(i);if(r==="move"&&t.options.transition){me(t.image,w)}t.action=false}},show:function(){var e=this;var t=e.options;var i=e.element;var r;if(t.inline||e.transitioning){return e}if(!e.isBuilt){e.build()}r=e.viewer;if(re(t.show)){xe(i,X,t.show,true)}if(Ee(i,X)===false){return e}e.open();he(r,l);xe(i,S,function(){e.view(e.target?oe(e.target,ne(e.images)):e.index);e.target=false},true);if(t.transition){e.transitioning=true;me(r,w);Ne(r);xe(r,k,fe(e.shown,e),true);me(r,d)}else{me(r,d);e.shown()}return e},hide:function(){var e=this;var t=e.options;var i=e.element;var r=e.viewer;if(t.inline||e.transitioning||!e.isShown){return e}if(re(t.hide)){xe(i,V,t.hide,true)}if(Ee(i,V)===false){return e}if(e.isViewed&&t.transition){e.transitioning=true;xe(e.image,k,function(){xe(r,k,fe(e.hidden,e),true);he(r,d)},true);e.zoomTo(0,false,false,true)}else{he(r,d);e.hidden()}return e},view:function(e){var t=this;var r=t.element;var a=t.title;var n=t.canvas;var o;var s;var l;var u;var f;e=Number(e)||0;if(!t.isShown||t.isPlayed||e<0||e>=t.length||t.isViewed&&e===t.index){return t}s=t.items[e];l=Ye(s,"img")[0];u=pe(l,"originalUrl");f=l.getAttribute("alt");o=i.createElement("img");o.src=u;o.alt=f;if(Ee(r,C,{originalImage:t.images[e],index:e,image:o})===false){return t}t.image=o;if(t.isViewed){he(t.items[t.index],h)}me(s,h);t.isViewed=false;t.index=e;t.imageData=null;me(o,g);Se(n);Fe(n,o);t.renderList();Se(a);xe(r,P,function(){var e=t.imageData;var i=e.naturalWidth;var r=e.naturalHeight;Ve(a,f+" ("+i+" Ã— "+r+")")},true);if(o.complete){t.load()}else{xe(o,I,fe(t.load,t),true);if(t.timeout){clearTimeout(t.timeout)}t.timeout=setTimeout(function(){he(o,g);t.timeout=false},1e3)}return t},prev:function(){var e=this;e.view(B(e.index-1,0));return e},next:function(){var e=this;e.view(M(e.index+1,e.length-1));return e},move:function(e,t){var i=this;var r=i.imageData;i.moveTo(ee(e)?e:r.left+Number(e),ee(t)?t:r.top+Number(t));return i},moveTo:function(e,t){var i=this;var r=i.imageData;var a=false;if(ee(t)){t=e}e=Number(e);t=Number(t);if(i.isViewed&&!i.isPlayed&&i.options.movable){if(Q(e)){r.left=e;a=true}if(Q(t)){r.top=t;a=true}if(a){i.renderImage()}}return i},zoom:function(e,t,i){var r=this;var a=r.imageData;e=Number(e);if(e<0){e=1/(1-e)}else{e=1+e}r.zoomTo(a.width*e/a.naturalWidth,t,i);return r},zoomTo:function(e,t,i,r){var a=this;var n=a.options;var o=.01;var s=100;var l=a.imageData;var u;var f;var v;var c;e=B(0,e);if(Q(e)&&a.isViewed&&!a.isPlayed&&(r||n.zoomable)){if(!r){o=B(o,n.minZoomRatio);s=M(s,n.maxZoomRatio);e=M(B(e,o),s)}if(e>.95&&e<1.05){e=1}u=l.naturalWidth*e;f=l.naturalHeight*e;if(i){v=Ie(a.viewer);c=i.touches?Le(i.touches):{pageX:i.pageX,pageY:i.pageY};l.left-=(u-l.width)*((c.pageX-v.left-l.left)/l.width);l.top-=(f-l.height)*((c.pageY-v.top-l.top)/l.height)}else{l.left-=(u-l.width)/2;l.top-=(f-l.height)/2}l.width=u;l.height=f;l.ratio=e;a.renderImage();if(t){a.tooltip()}}return a},rotate:function(e){var t=this;t.rotateTo((t.imageData.rotate||0)+Number(e));return t},rotateTo:function(e){var t=this;var i=t.imageData;e=Number(e);if(Q(e)&&t.isViewed&&!t.isPlayed&&t.options.rotatable){i.rotate=e;t.renderImage()}return t},scale:function(e,t){var i=this;var r=i.imageData;var a=false;if(ee(t)){t=e}e=Number(e);t=Number(t);if(i.isViewed&&!i.isPlayed&&i.options.scalable){if(Q(e)){r.scaleX=e;a=true}if(Q(t)){r.scaleY=t;a=true}if(a){i.renderImage()}}return i},scaleX:function(e){var t=this;t.scale(e,t.imageData.scaleY);return t},scaleY:function(e){var t=this;t.scale(t.imageData.scaleX,e);return t},play:function(){var e=this;var t=e.options;var r=e.player;var a=fe(e.loadImage,e);var n=[];var o=0;var l=0;var u;if(!e.isShown||e.isPlayed){return e}if(t.fullscreen){e.requestFullscreen()}e.isPlayed=true;me(r,s);le(e.items,function(e,s){var u=Ye(e,"img")[0];var f=i.createElement("img");f.src=pe(u,"originalUrl");f.alt=u.getAttribute("alt");o++;me(f,c);ge(f,w,t.transition);if(de(e,h)){me(f,d);l=s}n.push(f);xe(f,I,a,true);Fe(r,f)});if(Q(t.interval)&&t.interval>0){u=function(){e.playing=setTimeout(function(){he(n[l],d);l++;l=l<o?l:0;me(n[l],d);u()},t.interval)};if(o>1){u()}}return e},stop:function(){var e=this;var t=e.player;if(!e.isPlayed){return e}if(e.options.fullscreen){e.exitFullscreen()}e.isPlayed=false;clearTimeout(e.playing);he(t,s);Se(t);return e},full:function(){var e=this;var t=e.options;var i=e.viewer;var r=e.image;var a=e.list;if(!e.isShown||e.isPlayed||e.isFulled||!t.inline){return e}e.isFulled=true;e.open();me(e.button,b);if(t.transition){he(r,w);he(a,w)}me(i,n);i.setAttribute("style","");ve(i,{zIndex:t.zIndex});e.initContainer();e.viewerData=ue({},e.containerData);e.renderList();e.initImage(function(){e.renderImage(function(){if(t.transition){setTimeout(function(){me(r,w);me(a,w)},0)}})});return e},exit:function(){var e=this;var t=e.options;var i=e.viewer;var r=e.image;var a=e.list;if(!e.isFulled){return e}e.isFulled=false;e.close();he(e.button,b);if(t.transition){he(r,w);he(a,w)}he(i,n);ve(i,{zIndex:t.zIndexInline});e.viewerData=ue({},e.parentData);e.renderViewer();e.renderList();e.initImage(function(){e.renderImage(function(){if(t.transition){setTimeout(function(){me(r,w);me(a,w)},0)}})});return e},tooltip:function(){var e=this;var t=e.options;var i=e.tooltipBox;var r=e.imageData;if(!e.isViewed||e.isPlayed||!t.tooltip){return e}Ve(i,j(r.ratio*100)+"%");if(!e.tooltiping){if(t.transition){if(e.fading){Ee(i,k)}me(i,s);me(i,c);me(i,w);Ne(i);me(i,d)}else{me(i,s)}}else{clearTimeout(e.tooltiping)}e.tooltiping=setTimeout(function(){if(t.transition){xe(i,k,function(){he(i,s);he(i,c);he(i,w);e.fading=false},true);he(i,d);e.fading=true}else{he(i,s)}e.tooltiping=false},1e3);return e},toggle:function(){var e=this;if(e.imageData.ratio===1){e.zoomTo(e.initialImageData.ratio,true)}else{e.zoomTo(1,true)}return e},reset:function(){var e=this;if(e.isViewed&&!e.isPlayed){e.imageData=ue({},e.initialImageData);e.renderImage()}return e},update:function(){var e=this;var t=[];var i;if(e.isImg&&!e.element.parentNode){return e.destroy()}e.length=e.images.length;if(e.isBuilt){le(e.items,function(i,r){var a=Ye(i,"img")[0];var n=e.images[r];if(n){if(n.src!==a.src){t.push(r)}}else{t.push(r)}});ve(e.list,{width:"auto"});e.initList();if(e.isShown){if(e.length){if(e.isViewed){i=oe(e.index,t);if(i>=0){e.isViewed=false;e.view(B(e.index-(i+1),0))}else{me(e.items[e.index],h)}}}else{e.image=null;e.isViewed=false;e.index=0;e.imageData=null;Se(e.canvas);Se(e.title)}}}return e},destroy:function(){var e=this;var t=e.element;if(e.options.inline){e.unbind()}else{if(e.isShown){e.unbind()}ze(t,Y,e._start)}e.unbuild();ye(t,a);return e},open:function(){var e=this.body;me(e,o);e.style.paddingRight=this.scrollbarWidth+"px"},close:function(){var e=this.body;he(e,o);e.style.paddingRight=0},shown:function(){var e=this;var t=e.options;var i=e.element;e.transitioning=false;e.isFulled=true;e.isShown=true;e.isVisible=true;e.render();e.bind();if(re(t.shown)){xe(i,S,t.shown,true)}Ee(i,S)},hidden:function(){var e=this;var t=e.options;var i=e.element;e.transitioning=false;e.isViewed=false;e.isFulled=false;e.isShown=false;e.isVisible=false;e.unbind();e.close();me(e.viewer,l);e.resetList();e.resetImage();if(re(t.hidden)){xe(i,N,t.hidden,true)}Ee(i,N)},requestFullscreen:function(){var e=this;var t=i.documentElement;if(e.isFulled&&!i.fullscreenElement&&!i.mozFullScreenElement&&!i.webkitFullscreenElement&&!i.msFullscreenElement){if(t.requestFullscreen){t.requestFullscreen()}else if(t.msRequestFullscreen){t.msRequestFullscreen()}else if(t.mozRequestFullScreen){t.mozRequestFullScreen()}else if(t.webkitRequestFullscreen){t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}}},exitFullscreen:function(){var e=this;if(e.isFulled){if(i.exitFullscreen){i.exitFullscreen()}else if(i.msExitFullscreen){i.msExitFullscreen()}else if(i.mozCancelFullScreen){i.mozCancelFullScreen()}else if(i.webkitExitFullscreen){i.webkitExitFullscreen()}}},change:function(e){var t=this;var i=t.endX-t.startX;var r=t.endY-t.startY;switch(t.action){case"move":t.move(i,r);break;case"zoom":t.zoom(function(e,t,i,r){var a=H(e*e+t*t);var n=H(i*i+r*r);return(n-a)/a}(O(t.startX-t.startX2),O(t.startY-t.startY2),O(t.endX-t.endX2),O(t.endY-t.endY2)),false,e);t.startX2=t.endX2;t.startY2=t.endY2;break;case"switch":t.action="switched";if(O(i)>O(r)){if(i>1){t.prev()}else if(i<-1){t.next()}}break}t.startX=t.endX;t.startY=t.endY},isSwitchable:function(){var e=this;var t=e.imageData;var i=e.viewerData;return t.left>=0&&t.top>=0&&t.width<=i.width&&t.height<=i.height}};We.DEFAULTS={inline:false,button:true,navbar:true,title:true,toolbar:true,tooltip:true,movable:true,zoomable:true,rotatable:true,scalable:true,transition:true,fullscreen:true,keyboard:true,interval:5e3,minWidth:200,minHeight:100,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,zIndex:2015,zIndexInline:0,url:"src",build:null,built:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null};We.TEMPLATE='<div class="viewer-container">'+'<div class="viewer-canvas"></div>'+'<div class="viewer-footer">'+'<div class="viewer-title"></div>'+'<ul class="viewer-toolbar">'+'<li class="viewer-zoom-in" data-action="zoom-in"></li>'+'<li class="viewer-zoom-out" data-action="zoom-out"></li>'+'<li class="viewer-one-to-one" data-action="one-to-one"></li>'+'<li class="viewer-reset" data-action="reset"></li>'+'<li class="viewer-prev" data-action="prev"></li>'+'<li class="viewer-play" data-action="play"></li>'+'<li class="viewer-next" data-action="next"></li>'+'<li class="viewer-rotate-left" data-action="rotate-left"></li>'+'<li class="viewer-rotate-right" data-action="rotate-right"></li>'+'<li class="viewer-flip-horizontal" data-action="flip-horizontal"></li>'+'<li class="viewer-flip-vertical" data-action="flip-vertical"></li>'+"</ul>"+'<div class="viewer-navbar">'+'<ul class="viewer-list"></ul>'+"</div>"+"</div>"+'<div class="viewer-tooltip"></div>'+'<div class="viewer-button" data-action="mix"></div>'+'<div class="viewer-player"></div>'+"</div>";var _e=e.Viewer;We.noConflict=function(){e.Viewer=_e;return We};We.setDefaults=function(e){ue(We.DEFAULTS,e)};if(typeof define==="function"&&define.amd){define("viewer",[],function(){return We})}if(!t){e.Viewer=We}return We});